<!--@@master=masters/master.html-->
<!--@@block=head -->

<!--build:css(dist) /static/styles/property_to_rent_list.html.css-->
<link rel="stylesheet" href="/static/styles/introLite.css"/>
<link rel="stylesheet" href="/static/styles/dropload.css"/>
<link rel="stylesheet" href="/static/styles/project/rentCard.css"/>
<link rel="stylesheet" href="/static/styles/property_to_rent_list.css"/>
<link rel="stylesheet" href="/static/styles/project/houseInfobox.css"/>
<!--endbuild-->

<!--@@close-->

<!--@@block=custom_header -->
<div class="rentListHeader_phone rmm">
    <!-- ko with: rentListViewModel -->
    <div class="rmm-toggled rmm-closed rmm-center-closed">
        <div class="rmm-toggled-controls">
            <div class="rmm-button">
                <i class="icon-switch_button"></i>
            </div>
            <div class="rmm-center">
                <label id="userPageHeader_title" class="title" for="" data-bind="text: studentHouse"></label>
                <i class="rmm-center-indicator icon-down_arrow"></i>
            </div>
            <div class="rmm-toggled-title">
                <i class="icon-user_header"></i>
            </div>
        </div>
        <!-- @@include = ./partials/menu_items_mobile.html -->
        <ul class="rmm-center-menu" style="display:none;">
            <li><a onclick="window.currantModule.selectHouse('')">{{_('个人房源或学生公寓')}}</a></li>
            <li><a onclick="window.currantModule.selectHouse('non_student_house')">{{_('个人房源')}}</a></li>
            <li><a onclick="window.currantModule.selectHouse('student_house')">{{_('学生公寓')}}</a></li>
        </ul>
    </div>
    <!-- /ko -->
</div>
<!--@@close-->

<!--@@block=main -->
% show_requirement_rent_in_floatbar = 'true'
<!-- ko with: rentListViewModel -->
<div class="category_wrapper">
    <!-- @@include=./static/templates/location-search-box.tpl.html -->

    <div class="category three">
        <div class="selectWrap propertyType hiddenOnMobile" data-bind="if: !window.team.isPhone()">
            <select data-bind="value: isStudentHouse, fastChosen: isStudentHouse" class="ghostSelect" name="isStudentHouse">
                <option value="">{{_('个人房源或学生公寓')}}</option>
                <option value="false">{{_('个人房源')}}</option>
                <option value="true">{{_('学生公寓')}}</option>
            </select>
        </div><!--
    --><location-search-box params="parentVM: $data, hotCityList: {{json_dumps(hot_city_list)}}, hotSchoolList: {{json_dumps(hot_school_list)}}"></location-search-box><!--
    --><div class="hoverWrapper" data-bind="hoverTopBar: true">
            <div class="dateWrap">
                <div class="date inputWrapper" data-bind="dateRangePicker: {value: rentAvailableTimeFormated, timeEnabled: true}">
                    <input data-bind="dateInput, value: rentAvailableTimeFormated, changeText: {obj:summaryTitleObj, prop: 'set-rent-available-time'}" type="text" min="{{currentDate}}" class="" id="rentPeriodStartDate" name="rentPeriodStartDate" placeholder="{{_('起租日期')}}" autocomplete="off"/>
                    <label for="rentPeriodStartDate"></label>
                    <i data-bind="click: clearDate('rentAvailableTimeFormated'), visible: rentAvailableTime" class="clear" style="display: none" title="{{_('清空日期')}}"><img alt="" src="/static/images/intention/close.png"></i>
                </div><!--
            --><span class="hiddenOnPCWeb">{{_('至')}}</span><!--
            --><div class="date inputWrapper" data-bind="dateRangePicker: {value: rentDeadlineTimeFormated, timeEnabled: true}">
                    <input data-bind="dateInput, value: rentDeadlineTimeFormated, changeText: {obj:summaryTitleObj, prop: 'set-rent-deadline-time'}" type="text" min="{{currentDate}}" class="" id="rentPeriodEndDate" name="rentPeriodEndDate" placeholder="{{_('结束日期')}}" autocomplete="off"/>
                    <label for="rentPeriodEndDate"></label>
                    <i data-bind="click: clearDate('rentDeadlineTimeFormated'), visible: rentDeadlineTime" class="clear" style="display: none" title="{{_('清空日期')}}"><img alt="" src="/static/images/intention/close.png"></i>
                </div>
            </div><!--
        --><div class="selectWrap rentType hiddenOnMobile" data-bind="if: !window.team.isPhone()">
                <select data-bind="value: rentType, fastChosen: rentType, changeText: {obj:summaryTitleObj, prop: 'select-rent-type'}, changeSlug: rentTypeSlug" class="ghostSelect" name="rentType">
                    <option value="">{{_('单间或整租')}}</option>
                    %for index, rent_type in enumerate(rent_type_list):
                    <option value="{{rent_type.get('id')}}" data-slug="{{rent_type.get('slug')}}">{{rent_type.get('value')}}</option>
                    %end
                </select>
            </div>
            <div class="hiddenOnPCWeb showTagsWrap">
                <button id="showTags"  class="showTags textButton " data-state="closed">
                    <label>{{_('高级筛选')}}</label>
                    <img alt="" src="/static/images/property_list/tags-indicator-phone.png"/>
                </button>
            </div>
        </div>

        <button class="searchButton button red hiddenOnMobile" data-bind="click: searchTicketClick">
            <i class="icon-search_icon"></i>
            <span>{{_('搜索')}}</span>
        </button>
    </div>

</div>

<div id="result" class="result">
    <div id="tags" class="tags">
        <div class="tags_inner">

            <h3 class="title">{{_('从搜索结果中筛选')}}</h3>

            <div class="price">
                <i class="price_icon icon-coin_line"></i>
                <h4 class="price_title">{{_('租金')}}</h4>
                <div class="inner">
                    <div class="wrap">
                        %if rent_budget_list:
                        <div class="selectWrap rentBudget">
                            <select data-bind="value: rentBudgetMin, fastChosen: rentBudgetMin, changeText: {obj:summaryTitleObj, prop: 'select-rent-budget-min'}" name="rentBudgetMin">
                                <option value="">{{_('租金无下限')}}</option>
                                %for index, rent_budget in enumerate(rent_budget_item_list):
                                %if rent_budget.get('currency') == _.currency:
                                <option value="{{rent_budget.get('slug')}}">{{get_symbol_from_currency(_.currency)}}{{rent_budget.get('value')}}{{_('/周')}}</option>
                                %end
                                %end
                            </select>
                        </div>
                        <span>{{_('至')}}</span>
                        <div class="selectWrap rentBudget">
                            <select data-bind="value: rentBudgetMax, fastChosen: rentBudgetMax, changeText: {obj:summaryTitleObj, prop: 'select-rent-budget-max'}" name="rentBudgetMax">
                                <option value="">{{_('租金无上限')}}</option>
                                %for index, rent_budget in enumerate(rent_budget_item_list):
                                %if rent_budget.get('currency') == _.currency:
                                <option value="{{rent_budget.get('slug')}}">{{get_symbol_from_currency(_.currency)}}{{rent_budget.get('value')}}{{_('/周')}}</option>
                                %end
                                %end
                            </select>
                        </div>
                        %end
                    </div>
                </div>
            </div>

            %if property_type_list:
            <div class="rentType hiddenOnPCWeb" data-bind="if: window.team.isPhone()">
                <i class="rentType_icon icon-door"></i>
                <h4 class="rentType_title">{{_('出租类型')}}</h4>
                <filter-tags data-bind="changeText: {obj:summaryTitleObj, prop: 'change-rent-type'}" class="inner" params="list: {{json_dumps(rent_type_list)}}, key: 'rentType', slug: 'rentTypeSlug', vm: $data, unLimited: true, autoSelectFirstItem: true"></filter-tags>
            </div>
            %end

            <!-- @if ENV=='dev' || ENV=='debug' -->
            <div data-bind="if: rentTypeSlug() !== 'rent_type:whole'">
                <div class="independentBathroom">
                    <i class="independentBathroom_icon icon-bathroom_line"></i>
                    <h4 class="independentBathroom_title">{{_('独立卫浴')}}</h4>
                    <filter-tags data-bind="changeText: {obj:summaryTitleObj, prop: 'change-independent-bathroom'}" class="inner" params="list: [{id: 'true', value: '{{_('有')}}'}], key: 'independentBathroom', vm: $data, unLimited: true, autoSelectFirstItem: true"></filter-tags>
                </div>
            </div>
            <!-- @endif -->

            %if property_type_list_without_new_property:
            <textarea id="propertyTypeListWithoutNewProperty" style="display: none;">
                {{json_dumps(property_type_list_without_new_property)}}
            </textarea>
            <div class="propertyType" data-bind="visible: isStudentHouse() !== 'true'">
                <i class="propertyType_icon icon-building"></i>
                <h4 class="propertyType_title">{{_('房产类型')}}</h4>
                <filter-tags data-bind="changeText: {obj:summaryTitleObj, prop: 'change-property-type'}" class="inner" params="list: propertyTypeList, key: 'propertyType', vm: $data, unLimited: true, autoSelectFirstItem: true"></filter-tags>
            </div>
            %end

            %if bedroom_count_list:
                <div class="bedroomCount">
                    <i class="bedroomCount_icon icon-room_category"></i>
                    <h4 class="bedroomCount_title">{{_('居室数')}}</h4>
                    <filter-tags data-bind="changeText: {obj:summaryTitleObj, prop: 'change-bedroom-count'}" class="inner" params="list: {{json_dumps(bedroom_count_list)}}, key: 'bedroomCount', vm: $data, autoSelectFirstItem: true"></filter-tags>
                </div>
            %end

            %if building_area_list:
                <div class="space">
                    <i class="space_icon icon-size"></i>
                    <h4 class="space_title">{{_('面积')}}</h4>
                    <filter-tags data-bind="changeText: {obj:summaryTitleObj, prop: 'change-space'}" class="inner" params="list: {{json_dumps(building_area_list)}}, key: 'space', vm: $data, unLimited: true, autoSelectFirstItem: true"></filter-tags>
                </div>
            %end

            <ul class="entrance">
                <li>
                    <a href="/user-favorites">
                        <i class="icon-faver"></i>
                        <span>{{_('我的收藏')}}</span>
                    </a>
                </li>
                <li>
                    <a href="/user-properties#request">
                        <i class="icon-phone_line"></i>
                        <span>{{_('已咨询的房源')}}</span>
                    </a>
                </li>
            </ul>

        </div>
    </div>
    <div id="result_list_container" class="result_list_container">
        <h2 id="number_container" class="result_number" style="display:none">
            <!--{{_('共找到')}}<span id="number" class="number"></span> {{_('套房产')}}-->
            {{_('共找到下列出租房产')}}
        </h2>
        <div data-tabs>
            <ul id="tabSelector" class="tabSelector">
                <li data-tab=list class="list">
                    <i class="icon-list_view"></i>
                </li>
                <li data-tab=map  class="map">
                    <i class="icon-map_view"></i>
                </li>
            </ul>
            <div class="tabContent">
                <div class="item" data-tab-name="list">
                    <div id="result_list" class="result_list">

                    </div>
                    <div id="addtionalResultList_wrapper" class="addtionalResultList_wrapper" style="display:none;">
                        <div class="noSuitableHint">
                            <div class="line"></div>
                            <label class="hint">
                                {{_('没有找到合适的？来这里看看吧')}}
                            </label>
                        </div>
                        <div id="addtionalResultList" class="addtionalResultList">
                 
                        </div>
                    </div>
                    <img src="/static/images/common/ajax-loader.gif" id="loadIndicator" class="loadIndicator" style="display:none"/>
                    <p class="isAllLoadedInfo" style="display: none;text-align: center;color: #ccc;font-size: 14px;font-weight: lighter;">{{_('已经全部加载完毕啦')}}</p>
                </div>
                <div  class="item" data-tab-name="map">
                    <div id="mapCanvas" class="mapCanvas" style="position:relative;"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="emptyPlaceHolder" class="emptyPlaceHolder" style="display:none">
        <img alt="" src="/static/images/property_list/empty-hint.png"/>
        <div class="info">
            <h2 class="hint">{{_('暂无此类出租房产')}}</h2>
            <p class="addition">{{_('试试其他筛选条件吧... 您也可以')}}<a data-action="requirementRent">{{_('提交求租需求单')}}</a>{{_(', 由平台为您推荐')}}</p>
        </div>
    </div>

    <div class="tabSelector_phone hiddenInClient" data-tab="list">
        <i class="list icon-list_view"></i>
        <i class="map icon-map_view "></i>
    </div>

</div>
<!-- @@include=/static/templates/rent_card.tpl.html-->
<!-- @@include=/static/templates/rent_map_card.tpl.html-->
<!-- /ko -->
<!--@@close-->

<!--@@block=scripts -->
<!--build:js /static/scripts/property_to_rent_list.html.js-->
<script src="/static/bower_components/knockout/dist/knockout.js"></script>
<script src="/static/bower_components/dropload/dist/dropload.min.js"></script>
<script src="/static/scripts/intro_lite.js"></script>
<script src="/static/scripts/filter_of_neighborhood_subway_school.js"></script>
<script src="/static/scripts/common_ko.js"></script>
<script src="/static/scripts/property_to_rent_list_ko.js"></script>
<script src="/static/scripts/property_to_rent_list_selectors.js"></script>
<script src="/static/scripts/property_to_rent_list_tags.js"></script>
<script src="/static/scripts/property_list_bing_map.js"></script>
<script src="/static/scripts/property_to_rent_list.js"></script>
<!--endbuild-->
<!--@@close-->

