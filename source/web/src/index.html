<!--@@master=masters/master.html-->
<!--@@block=head -->
<!--build:css(dist) /static/styles/index.html.css-->
<link rel="stylesheet" href="/static/bower_components/swiper/dist/css/swiper.min.css">
<link rel="stylesheet" href="/static/styles/project/houseCard.css"/>
<link rel="stylesheet" href="/static/styles/project/processCard.css"/>
<link rel="stylesheet" href="/static/styles/index.css"/>
<link rel="stylesheet" href="/static/styles/indexBuyer.css"/>
<link rel="stylesheet" href="/static/styles/indexLandlord.css"/>
<link rel="stylesheet" href="/static/styles/indexDelegateRent.css"/>
<link rel="stylesheet" href="/static/bower_components/swiper/dist/css/swiper.css"/>
<link rel="stylesheet" href="/static/styles/appDownloadContent.css"/>
<link rel="stylesheet" href="/static/styles/indexRenter.css"/>
<link rel="stylesheet" href="/static/styles/selectCity.css"/>
<!--endbuild-->
<!--@@close-->
<!--@@block=main -->
<!-- ko with: indexViewModel -->
<div class="tabBoxMobile hiddenOnPCWeb">
    <ul class="tab" data-bind="foreach: tabOptions, css: hoverTab() || activeTab()"><!--
        --><li data-bind="css: {active: $parent.activeTab() == slug}, click: $parent.switchTab.bind($parent), event: {mouseover: $parent.mouseoverTab.bind($parent), mouseout: $parent.mouseoutTab.bind($parent)}">
            <h3 data-bind="text: text"></h3>
        </li><!--
    --></ul>
</div>
<!-- @@include =./partials/location_filter_tpl.html -->
<!-- @@include=./static/templates/location-search-box.tpl.html -->
<div class="indexBanner" data-bind="css: activeTab() + (activeTab() == 'landlord' && window.team.isPhone() ? ' hiddenInNonClient' : '')">
    <h1 data-bind="visible: activeTab() == 'tenant'">{{_('视频直播全英优质房源')}} <br class="hiddenOnPCWeb">{{_('足不出户搞定租房')}}</h1>
    <h1 style="display: none" data-bind="visible: activeTab() == 'studentHouse'">{{_('学生公寓文案')}} <br class="hiddenOnPCWeb">{{_('学生公寓文案')}}</h1>
    <h1 style="display: none" data-bind="visible: activeTab() == 'landlord'">{{_('有英国房源要出租？')}}</h1>
    <h1 style="display: none" data-bind="visible: activeTab() == 'investor'">{{_('您身边的英国房产置业专家')}}</h1>
    <div class="tabBox">
        <ul class="tab hiddenOnMobile" data-bind="foreach: tabOptions, css: activeTab() + (hoverTab() ? ' ' + hoverTab() + 'Hover' : '')"><!--
            --><li data-bind="css: {active: $parent.activeTab() == slug}, click: $parent.switchTab.bind($parent), event: {mouseover: $parent.mouseoverTab.bind($parent), mouseout: $parent.mouseoutTab.bind($parent)}">
                <i class="img_wrapper" data-bind="css: icon"></i>
                <h3 data-bind="text: text"></h3>
            </li><!--
        --></ul>
        <div class="content" data-bind="visible: activeTab() == 'tenant'">
            <div class="category three hiddenOnMobile">
                <location-search-box class="personalHouseSearchBox" params="parentVM: $data, hotCityList: {{json_dumps(hot_city_list)}}, hotSchoolList: {{json_dumps(hot_school_list)}}, element: '.personalHouseSearchBox'"></location-search-box>
                <button class="search button red search-lg" data-bind="click: searchTicketClick">
                    {{_('搜索')}}
                </button>
                <ul class="entrance hiddenOnMobile">
                    <li>
                        <a href="/user-favorites">
                            <i class="icon-faver"></i>
                            <span>{{_('我的收藏')}}</span>
                        </a>
                    </li><!--
                    --><li>
                        <a href="/user-properties#request">
                            <i class="icon-phone_line"></i>
                            <span>{{_('已咨询的房源')}}</span>
                        </a>
                    </li><!--
                    --><li>
                        <a data-action="requirementRent" data-need-bridge>
                            <i class="icon-requirement_line"></i>
                            <span>{{_('提交求租意向单')}}</span>
                        </a>
                    </li>
                </ul>
            </div>
            <a href="/property-to-rent-list?showSearchModal=true" class="button searchButton hiddenOnPCWeb" data-need-bridge>
                <span class="text">{{_('想租住在哪里?')}}</span><span class="icon"><i class="icon-search"></i></span>
            </a>
        </div>
        <div style="display: none" class="content" data-bind="visible: activeTab() == 'studentHouse'">
            <div class="category three hiddenOnMobile">
                <location-search-box class="studentHouseSearchBox" params="parentVM: $data, hotCityList: {{json_dumps(hot_city_list)}}, hotSchoolList: {{json_dumps(hot_school_list)}}, isStudentHouse: 'true', element: '.studentHouseSearchBox'"></location-search-box>
                <button class="search button red search-lg" data-bind="click: searchTicketClick">
                    {{_('搜索')}}
                </button>
                <ul class="entrance hiddenOnMobile">
                    <li>
                        <a href="/user-favorites">
                            <i class="icon-faver"></i>
                            <span>{{_('我的收藏')}}</span>
                        </a>
                    </li><!--
                    --><li>
                    <a href="/user-properties#request">
                        <i class="icon-phone_line"></i>
                        <span>{{_('已咨询的房源')}}</span>
                    </a>
                </li><!--
                    --><li>
                    <a data-action="requirementRent" data-need-bridge>
                        <i class="icon-requirement_line"></i>
                        <span>{{_('提交求租意向单')}}</span>
                    </a>
                </li>
                </ul>
            </div>
            <a href="/property-to-rent-list?showSearchModal=true&isStudentHouse=true" class="button searchButton hiddenOnPCWeb" data-need-bridge>
                <span class="text">{{_('想租住在哪里?')}}</span><span class="icon"><i class="icon-search"></i></span>
            </a>
        </div>
        <div style="display: none" class="content" data-bind="visible: activeTab() == 'landlord'">
            <div class="hiddenInNonClient">
                %if is_mobile_client_version('>=', '1.1.2'):
                <a class="button bigButton red" href="yangfd://property-to-rent/create">
                    <i class="icon-cellphone"></i>
                    <span>{{_('出租发布')}}</span>
                </a>
                %else:
                <a class="button bigButton red" href="#" onclick="window.bridge.callHandler(&quot;createRentTicket&quot;);return false;" data-need-bridge>
                    <i class="icon-cellphone"></i>
                    <span>{{_('出租发布')}}</span>
                </a>
                %end
            </div>
            <a href="/property-to-rent/create?rent_type={{next(item for item in rent_type_list if item.get('slug') == 'rent_type:single').get('id')}}" class="button bigButton blue hiddenInClient">
                <i class="icon-door"></i>
                <span>{{_('单间出租')}}</span>
            </a><!--
            --><a href="/property-to-rent/create?rent_type={{next(item for item in rent_type_list if item.get('slug') == 'rent_type:whole').get('id')}}" class="button bigButton red hiddenInClient">
                <i class="icon-house"></i>
                <span>{{_('整套出租')}}</span>
            </a>
        </div>
        <div style="display: none" class="content" data-bind="visible: activeTab() == 'investor'">
            <div class="category three hiddenOnMobile">
                <location-filter class="investorFilterWrapper" params="wrapper: '.investorFilterWrapper', searchUrl: '/property-list'"></location-filter>
            </div>
        </div>
    </div>
</div>


<div class="roleChooser">
    <ul class="content">
        <li data-bind="visible: activeTab() == 'tenant'" style="display:none;">
            <!-- @@include =./partials/index_renter.html -->
        </li>
        <li data-bind="visible: activeTab() == 'studentHouse'" style="display:none;">
            <!-- @@include =./partials/index_student_house.html -->
        </li>
        <li data-bind="visible: activeTab() == 'landlord'" style="display:none;">
            <!-- @@include =./partials/index_landlord.html -->
        </li>
        <li data-bind="visible: activeTab() == 'investor'" style="display:none;">
            <!-- @@include =./partials/index_buyer.html -->
        </li>
    </ul>
</div>


%if news_list :
    <div class="news_wrapper hiddenInClient">
        <div class="news">
            <h2 class="title">
                {{_('资讯')}}
            </h2>

            <div class="featuredNews">
                % news = news_list[0]
                %if ('images' in news) and news.get('images'):
                    <a href="/news/{{news_list[0].get('id')}}" style="text-decoration:none;"><img alt="{{news_list[0].get('title', '')}}" class="picture" src="{{!fetch_image(news.get('images')[0], thumbnail=True, news_id=news.get('id'))}}"/></a>
                %end
                <div class="content_wrapper">
                    <a href="/news/{{news_list[0].get('id')}}" style="text-decoration:none;"><h3 class="title">
                        {{news_list[0].get('title', '')}}</h3></a>

                    <p class="content">
                        %if news_list[0].get('summary', '') != {}:
                        {{!news_list[0].get('summary', '')}}
                        %end
                    </p>
                    <a class="ghostButton red detail" href="/news/{{news_list[0].get('id')}}">{{_('详细')}}</a>
                </div>
            </div>

            %if len(news_list) > 1 :
                <div class="moreNews">
                    <h3 class="title">{{_('更多资讯')}}</h3>

                    <div class="list">
                        %for index, item in enumerate(news_list):
                            %if index > 0 and index < 6:
                                <a class="item" href="/news/{{item.get('id')}}">{{item.get('title', '')}}</a>
                            %end
                        %end
                    </div>
                    <a class="ghostButton red more" href="/news-list">{{_('了解更多')}}</a>
                </div>
            %end
        </div>
    </div>
%end

<ul class="floatBar_phone hiddenInClient">
    <li class="phone"><a href="tel:{{get_phone_numbers('link')[0]}}"><i></i>{{_(u'拨打')+get_phone_numbers('display')[0]+_(u'咨询')}}</a></li>
    <li class="requirement"><a href="/requirement"><i class="icon-requirement_bottom"></i></a></li>
</ul>

<!-- @@include=/static/templates/suggestion_house_card.tpl.html -->

<!-- @@include=/static/templates/suggestion_empty_house_card.tpl.html -->

<!-- @@include = ./partials/delegate_rent_popup.html -->
<!-- @@include = ./partials/delegate_sale_popup.html -->
<!-- /ko -->
<!--@@close-->

<!--@@block=scripts -->
<script>

    window.iconMap = {
        'school_nearby_house': 'category_b',
        'off_plan_property': 'category_e',
        'existing_property': 'category_d',
        'rental_guarantee': 'category_a'
    }
</script>
<!--build:js /static/scripts/index.html.js-->
<script type="text/javascript" src="/static/bower_components/knockout/dist/knockout.js"></script>
<script type="text/javascript" src="/static/bower_components/swiper/dist/js/swiper.jquery.min.js"></script>
<script type="text/javascript" src="/static/vendors/Blur.js/blur.js"></script>
<script src="/static/scripts/common_ko.js"></script>
<script src="/static/scripts/filter_of_neighborhood_subway_school.js"></script>
<script src="/static/scripts/property_to_rent_list_selectors.js"></script>
<script src="/static/scripts/index_app_download.js"></script>
<script src="/static/scripts/index_intention.js"></script>
<script src="/static/scripts/index_delegate_rent.js"></script>
<script src="/static/scripts/index_delegate_sale.js"></script>
<script src="/static/scripts/index.js"></script>
<!--endbuild-->
<!--@@close-->
