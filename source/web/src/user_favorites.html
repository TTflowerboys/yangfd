<!--@@master = masters/user_master.html-->
<!--@@block =head -->
<link rel="stylesheet" href="/static/styles/project/houseCard.css" />
<link rel="stylesheet" href="/static/styles/userFavorites.css" />
<!--@@close-->
<!--@@block = main -->
<div class="content">
    <div class="contentHeader">
    <h1>{{_('我的收藏')}}</h1>
      %if (_i18n(favorite_list)):
    <label class="count_wrapper">
        {{_('(共')}} <i class="count">{{len(favorite_list)}}</i> {{_('条收藏)')}}</label>
    </div>
    <div class="list">
        %for index, fav in enumerate(_i18n(favorite_list)) :
           %if fav.get("property"):
               
           <div class=houseCard>
           %if fav.get('property').get('reality_images', []) :
           <img src="{{_i18n(fav.get('property').get('reality_images'))[0]}}" width=320 height=240/>
           %else :
           <img src="/static/images/placeholder/property.jpg" width=320 height=240/>
           %end

           <div class=description>
                       <h1 class=name><a href=/property/{{fav.get('property').get('id')}} style="text-decoration:none; color:#333;">{{fav.get('property').get('name', '')}}</a></h1>
               <span class=price>
                   %if fav.get('property').get('total_price'):
                   {{fav.get('property').get('total_price').get('unit_symbol')}} <strong>{{str(int(float(fav.get('property').get('total_price').get('value'))))}}</strong>
                   %end
               </span>
               <p class=size>
                   %if fav.get('property').get('living_room_count'):
                   {{fav.get('property').get('livint_room_count')}} {{_('房间')}},
                   %end
                   %if fav.get('property').get('bathroom_count'):
                   {{fav.get('property').get('bathroom_count')}} {{_('卫生间')}},
                   %end
                   %if fav.get('property').get('space'):
                   {{float("{0:.2f}".format(float(fav.get('property').get('space').get('value'))))}}
                   %if (fav.get('property').get('space').get('unit') == 'foot ** 2'):
                   foot <sup>2</sup>
                   %elif (fav.get('property').get('space').get('unit') == 'acre'):
                   acre
                   %elif (fav.get('property').get('space').get('unit') == 'meter ** 2'):
                   m <sup>2</sup>
                   %elif (fav.get('property').get('space').get('unit') == 'kilometer ** 2'):
                   km <sup>2</sup>
                   %else:
                   {{fav.get('property').get('space').get('unit')}}
                   %end
                   %end
               </p>
               %if (fav.get('property').get('annual_return_estimated')) :
               <p class=estimate><span class=label>{{_('预期年租金')}} <br/>{{_('收益率')}}</span><span class=value>
                       <strong>{{ fav.get('property').get('annual_return_estimated')}}</strong></span></p>
               %end
               <ul class=properties>

                   %if (fav.get('property').get('intention') and len(fav.get('property').get('intention'))) :
                   <li><img src="/static/images/icon/house-card-tag.png" alt="" />
                       <span>
                           %for index, oneIntention in enumerate(fav.get('property').get('intention')):
                           %if 'value' in oneIntention:
                           {{oneIntention.get('value')}}
                           %end
                           %end
                       </span>
                   </li>
                   %end
                   
                   %if (fav.get('property').get('equity_type')) :
                   <li><img src="/static/images/icon/house-card-house.png" alt="" /> <span> {{fav.get('property').get('equity_type', '').get('value')}}</span></li>
                   %end
                   %if (_i18n(fav.get('property').get('street'))) :
                   <li><img src="/static/images/icon/house-card-location.png" alt="" /> <span>{{fav.get('property').get('street', '')}} </span></li>
                   %end
               </ul>

               <div class="otherAction">
                   <button id="cancelFavorite" data-id={{fav.get('id')}} class="ghostButton darkGray">{{_('取消收藏')}}</button>
               </div>
               <div class="undo_shadow" style="display:none;">
                   <button id="undoFavorite"  data-id={{fav.get('id')}} data-property-id="{{fav.get('property').get('id')}}" class="undo"> <img alt="" src="/static/images/icon/favorites/undo.png"/><span>{{_('撤销')}}</span></button>
               </div>
           </div>          
    </div>

            %end
        %end
    %end
    </div>

     <div id="emptyPlaceHolder" class="emptyPlaceHolder"
          %if len(favorite_list):
          style="display:none;"
          %end
          >
        <img src="/static/images/icon/notice.png" alt="" />
        <div class="holderText">
            <h2>{{_('您还没有收藏')}}
            </h2>
            <p>
                {{!_('去<a href="/property_list">房产列表</a>看看吧')}}
            </p>
        </div>
    </div>
    
</div>
<!--@@close-->
<!--@@block=scripts-->
<script src="/static/scripts/favorites.js"></script>
<!--@@close-->
