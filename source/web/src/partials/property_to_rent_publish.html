<div class="route publishRoute" data-route="step2" style="display: none;">
    <div class="step">
        <div class="line red"></div>
        <div class="start">
            <div class="main">
                <img src="/static/images/customer/ico_step_2_write.png">
                <div>
                    {{_('填写详情')}}
                </div>
            </div>
        </div>
        <div class="end">
            <div class="main">
                <img src="/static/images/customer/ico_step_2_show.png">
                <div>
                    {{_('预览发布')}}
                </div>
            </div>
        </div>
    </div>
    <hr/>
    <div class="clearfix">

        <div class="wrap leftWrap">
            <div class="titleWrap">
                <h2>{{_('微信展示预览')}}</h2>
                <h3>{{_('房东信息')}}</h3>
            </div>
            %if not user:
            <!--未登录需要快速注册流程-->
            <form id="form2">
                <div class="formGroup">
                    <p>{{_('为了方便租客联系您，请先完善个人资料和联系方式或')}}<a class="link" onclick="javascript:project.showSignInModalOrGoToSignIn()">{{_('点击此处登录')}}</a>{{_('，再完成房源的发布')}}</p>
                </div>
                <div class="formGroup">
                    <label for="nickname">{{_('姓名')}}</label>
                    <input type="text" id="nickname" name="nickname" data-validator="required trim"/>
                </div>
                <div class="formGroup">
                    <label for="email">{{_('邮箱')}}</label>
                    <input type="text" id="email" name="email" data-validator="required trim email"/>
                    <p class="addContactWrap">
                        <input type="checkbox" id="addContact-email" checked="checked" data-addContact="email"/><label class="addContactLabel" for="addContact-email">{{_('展示邮箱给注册租客')}}</label>
                    </p>
                </div>
                <div class="formGroup">
                    <label for="phone">{{_('手机号')}}</label>
                    <!-- @@include=country_code_select.html -->
                    <input type="text" id="phone" name="phone" data-validator="required trim number"/>
                    <p class="addContactWrap">
                        <input type="checkbox" id="addContact-phone" checked="checked" data-addContact="phone"/><label class="addContactLabel" for="addContact-phone">{{_('展示电话给注册租客')}}</label>
                    </p>
                </div>

                <div class="formGroup">
                    <label for="code">{{_('验证码')}}</label>
                    <input type="text" id="code" name="code" data-validator="required trim"/>
                    <button type="button" id="requestSMSCodeBtn" class="ajaxButton manualTriggerLoadingEnd">
                        {{_('获取验证码')}}
                    </button>
                    <div class="errorMsgOfGetCode" style="display: none;"></div>
                    <div class="sucMsg" style="display: none;"><label></label>{{_('验证码已发送到您的手机，请将验证码填写到上方输入框后再发布房产')}}</div>
                </div>
                <div class="formGroup">
                    <label for="email">{{_('微信号')}}</label>
                    <input type="text" id="wechat" name="wechat" data-validator="trim" data-addContact="wechat"/>
                </div>
                <div class="formGroup">
                    <label></label>
                    <span>{{_('确认代表您同意创建一个洋房东账号供以后查看租客请求使用')}}</span>
                </div>
            </form>
            %elif user and set(user.get('role')) & set(['jr_admin','admin','jr_operation','operation']):
            <!--管理员账号登陆，可以代发的流程-->
            <form id="form2" data-admin="true">
                <div class="formGroup">
                    <p>{{_('为了方便租客联系您，请先完善您的联系方式，再完成房源的发布')}}</p>
                </div>
                <div class="formGroup">
                    <label>{{_('是否代发')}}</label>
                    <select name="delegate" class="ghostSelect" >
                        <option value="user"
                            %if rent.get('user',{}).get('id') != rent.get('creator_user',{}).get('id'):
                            selected
                            %end
                            >{{_('为用户代发房源')}}</option>
                        <option value="own"
                            %if rent.get('user',{}).get('id') == rent.get('creator_user',{}).get('id'):
                            selected
                            %end
                            >{{_('为自己发房源')}}</option>
                    </select>
                </div>

                <div class="formGroup" data-show="user" style="display: none;">
                    <label for="userPhone">{{_('用户手机')}}</label>
                    <!-- @@include=country_code_select.html -->
                    <input type="text" id="userPhone" name="userPhone" placeholder="{{_('代发用户手机')}}" data-validator="required,trim,number"
                        %if rent.get('user',{}).get('phone'):
                        value="{{rent.get('user',{}).get('phone')}}"
                        data-country-code="{{rent.get('user',{}).get('country_code')}}"
                        %end
                        />
                </div>
                <!--<div class="formGroup" data-show="user" style="display: none;">
                    <label>{{_('用户国家')}}</label>
                    <select name="userCountry" class="countrySelect ghostSelect">
                        <option value="">{{_('请选择代发用户国家')}}</option>
                        %for index, country  in enumerate(country_list_for_intention):
                        <option value="{{country.get('code')}}">
                        {{country.get('name')}}
                        </option>
                        %end
                    </select>
                </div>-->
                <div class="formGroup" data-user-input style="display: none;">
                    <label for="userNickname">{{_('用户昵称')}}</label>
                    <input type="text" id="userNickname" name="userNickname" placeholder="{{_('代发用户昵称')}}" data-validator="required,trim"/>
                </div>
                <div class="formGroup" data-user-input style="display: none;">
                    <label for="userEmail">{{_('用户邮箱')}}</label>
                    <input type="text" id="userEmail" name="userEmail" placeholder="{{_('代发用户邮箱')}}" data-validator="required,trim,email"/>
                </div>
                <div class="formGroup" data-show="own">
                    <label>{{_('姓名')}}</label>
                    <span>{{user.get('nickname','')}}</span>
                </div>
                <div class="formGroup" data-show="own">
                    <label for="email">{{_('邮箱')}}</label>
                    <span>{{user.get('email','')}}</span>
                    <p class="addContactWrap">
                        <input type="checkbox" id="addContact-email" checked="checked" data-addContact="email"/><label class="addContactLabel" for="addContact-email">{{_('展示邮箱给注册租客')}}</label>
                    </p>
                </div>
                <div class="formGroup" data-show="own">
                    <label for="phone">{{_('手机号')}}</label>
                    <span>{{user.get('phone','')}}</span>
                    <p class="addContactWrap">
                        <input type="checkbox" id="addContact-phone" checked="checked" data-addContact="phone"/><label class="addContactLabel" for="addContact-phone">{{_('展示电话给注册租客')}}</label>
                    </p>
                </div>
                <div class="formGroup" data-show="own">
                    <label for="email">{{_('微信号')}}</label>
                    <input type="text" id="wechat" name="wechat" data-validator="trim" data-addContact="wechat" value="{{user.get('wechat','')}}"/>
                </div>

                <div class="formGroup" data-show="own">
                    <label></label>
                    <span>{{_('您选择的联系方式仅展示给平台注册的租客')}}</span>
                </div>
            </form>
            %else:
            <!--已登录需要增加选择联系方式流程-->
            <form id="form2">
                <div class="formGroup">
                    <p>{{_('为了方便租客联系您，请先完善您的联系方式，再完成房源的发布')}}</p>
                </div>
                <div class="formGroup">
                    <label>{{_('姓名')}}</label>
                    <span>{{user.get('nickname','')}}</span>
                </div>
                <div class="formGroup">
                    <label for="email">{{_('邮箱')}}</label>
                    <span>{{user.get('email','')}}</span>
                    <p class="addContactWrap">
                        <input type="checkbox" id="addContact-email" checked="checked" data-addContact="email"/><label class="addContactLabel" for="addContact-email">{{_('展示邮箱给注册租客')}}</label>
                    </p>
                </div>
                <div class="formGroup">
                    <label for="phone">{{_('手机号')}}</label>
                    <span>{{user.get('phone','')}}</span>
                    <p class="addContactWrap">
                        <input type="checkbox" id="addContact-phone" checked="checked" data-addContact="phone"/><label class="addContactLabel" for="addContact-phone">{{_('展示电话给注册租客')}}</label>
                    </p>
                </div>
                <div class="formGroup">
                    <label for="email">{{_('微信号')}}</label>
                    <input type="text" id="wechat" name="wechat" data-validator="trim" data-addContact="wechat" value="{{user.get('wechat','')}}"/>
                </div>

                <div class="formGroup">
                    <label></label>
                    <span>{{_('您选择的联系方式仅展示给平台注册的租客')}}</span>
                </div>
            </form>
            %end

        </div>

        <div class="rightWrap wrap clearfix">
            <div class="previewBox">
                <iframe src="" id="previewIframe" name="previewIframe" style="width:252px;height: 447px;">

                </iframe>
            </div>
            <div class="infoBox">
                <dl class="info">
                    <dt class="active">{{_('封面')}}</dt>
                    <dd class="active">{{_('包含您提交的房产名称以及类型')}}<br><a href="#/1">{{_('[返回编辑]')}}</a></dd>
                    <dt>{{_('房屋概况')}}</dt>
                    <dd>{{_('包含您要出租的房屋的概况')}}<br><a href="#/2">{{_('[返回编辑]')}}</a></dd>
                    <dt>{{_('房产设施')}}</dt>
                    <dd>{{_('展示您填写的更多详情和配套设施')}}<br><a href="#/3">{{_('[返回编辑]')}}</a></dd>
                    <dt>{{_('房屋位置')}}</dt>
                    <dd>{{_('展示您的房屋在地图上的位置')}}<br><a href="#/4">{{_('[返回编辑]')}}</a></dd>
                    <dt>{{_('实景图片')}}</dt>
                    <dd>{{_('展示您上传的房屋实景图片')}}<br><a href="#/5">{{_('[返回上传图片]')}}</a></dd>
                    <dt>{{_('街区报告')}}</dt>
                    <dd>{{_('展示您的房屋所在街区的概况')}}<br><a href="#/6">{{_('[返回编辑]')}}</a></dd>
                </dl>
            </div>
        </div>
    </div>
    <div class="errorMsg2" style="display: none;"></div>
    <div style="text-align: center">
        %if rent.get('status'):
        <button class="submit_button ajaxButton" id="publish" data-ticketid="{{rent.get('id','')}}">{{_('重新发布')}}</button>
        %else:
        <button class="submit_button ajaxButton" id="publish" data-ticketid="{{rent.get('id','')}}">{{_('发布')}}</button>
        %end
    </div>
</div>
