<template id='rent-request-tpl'>
    <div id="rent_request_popup" class="requirement_popup rentRequestContainer" data-bind="visible: visible">
        <div class="requirement_popup_shadow" data-bind="click: close"></div>
        <div class="requirement_wrapper">
            <div class="requirement">
                <div class="info" data-bind="visible: formWrapVisible">
                    <div class="requirement_title">
                        <h2 class="title">{{_('租房流程')}}</h2>
                        <ul class="hint">
                            <li>{{_('向房东提交您的咨询申请')}}</li>
                            <li>{{_('平台会与房东确认房源是否可租和您的资料是否符合房东要求')}}</li>
                            <li>{{_('房东同意后平台将与您取得联系')}}</li>
                        </ul>
                    </div>
                </div>
                <div class="formWrap" data-bind="css: 'inStep' + step(), visible: formWrapVisible">
                    <div class="stepWrap ">
                        <div class="step step1">1<p class="info">{{_('求租申请')}}</p></div>
                        <div class="step step2">2<p class="info">{{_('个人信息')}}</p></div>
                    </div>
                    <form class="requirement_rent_form">
                        <div class="step1" data-bind="visible: step() === 1">
                            <div class="leftWrap">
                                <div class="row">
                                    <div class="cell rentPeriod">
                                        <p class="title">{{_('预计租期')}}</p>
                                        <div class="date inputWrapper" data-bind="dateRangePicker: rentAvailableTimeFormated">
                                            <input data-bind="value: rentAvailableTimeFormated" type="text" class="" placeholder="{{_('选择起租日期')}}" autocomplete="off"/>
                                        </div>
                                        <span>{{_('至')}}</span>
                                        <div class="date inputWrapper" data-bind="dateRangePicker: rentDeadlineTimeFormated">
                                            <input data-bind="value: rentDeadlineTimeFormated" type="text" class="" placeholder="{{_('选择结束日期')}}" autocomplete="off"/>
                                        </div>
                                    </div>
                                    <div class="cell tenantCount">
                                        <p class="title">{{_('入住人数')}}</p>
                                        <select data-bind="chosen: tenantCountList,
                                            optionsText: function(item){return item + window.i18n('人入住')},
                                            value: tenantCount
                                        "></select>
                                    </div>
                                </div>
                                <div class="wrap">
                                    <template id="whetherRadio">
                                        <div class="radioWrap">
                                            <input type="radio" data-bind="checked: value, attr: {id: key()+'1', name: key}, checkedValue: true"/><label data-bind="attr: {for: key()+'1'}">{{_('是')}}</label>
                                        </div>
                                        <div class="radioWrap">
                                            <input type="radio" data-bind="checked: value, attr: {id: key()+'0', name: key}, checkedValue: false"/><label data-bind="attr: {for: key()+'0'}">{{_('否')}}</label>
                                        </div>
                                    </template>
                                    <div class="row">
                                        <span class="title">{{_('是否吸烟')}}</span>
                                        <whether-radio params="vm: $data, key: 'smoke'"></whether-radio>
                                    </div>
                                    <div class="row">
                                        <span class="title">{{_('是否会带小孩一同入住')}}</span>
                                        <whether-radio params="vm: $data, key: 'baby'"></whether-radio>
                                    </div>
                                    <div class="row">
                                        <span class="title">{{_('是否携宠物入住')}}</span>
                                        <whether-radio params="vm: $data, key: 'pet'"></whether-radio>
                                    </div>
                                </div>
                                <div class="row">
                                    <textarea rows="3" data-bind="value: description" placeholder="{{_('写下您入住的原因和对房东的问题')}}"></textarea>
                                </div>
                            </div>
                            <div class="rightWrap">
                                <div class="row">
                                    <p class="title">{{_('护照照片（可选）')}}</p>
                                    <div class="image_panel" data-bind="visible: !uploadProgressVisible()">
                                        <div id="fileuploader" class="upload_image">
                                            <p>{{_('直接将照片文件拖拽至框中')}}</p>
                                            <p>{{_('或者直接')}}<a>{{_('查找文件')}}</a></p>
                                        </div>
                                    </div>
                                    <div id="uploadProgress" class="clearfix" data-bind="visible: uploadProgressVisible"></div>
                                    <p class="hint">{{_('上传VISA可以提升房东对您的信任度')}}</p>
                                </div>
                            </div>

                        </div>
                        <div class="step2" data-bind="visible: step() === 2">
                            <div class="row">
                                <p class="title">{{_('姓名')}}</p>
                                <input class="name" type="text" data-bind="value: nickname, attr: {readonly: !!user()}"/><!--
                                --><select class="gender" data-bind="chosen: genderList,
                                    optionsText: 'text',
                                    value: genderObj,
                                    optionsCaption: '{{_('性别')}}'"></select><!--
                                --><select class="occupation" data-bind="chosen: occupationList,
                                    optionsText: 'value',
                                    value: occupationObj,
                                    optionsCaption: '{{_('职业')}}'"></select>
                            </div>
                            <div class="row">
                                <p class="title">{{_('生日')}}</p>
                                <select class="birthYear" data-bind="chosen: birthYearList,
                                    optionsText: function(item){return item + window.i18n('年')},
                                    value: birthYear"></select><!--
                                --><select class="birthMonth" data-bind="chosen: birthMonthList,
                                    optionsText: function(item){return item + window.i18n('月')},
                                    value: birthMonth"></select><!--
                                --><select class="birthDate" data-bind="chosen: birthDateList,
                                    optionsText: function(item){return item + window.i18n('日')},
                                    value: birthDate"></select>
                            </div>
                            <div class="row">
                                <p class="title"></p>
                                <textarea id="countryData" style="display: none;">
                                    {{json_dumps(country_list)}}
                                </textarea>
                                <select class="countryCode" data-bind="chosen: countryCodeList,
                                    optionsText: function(item){return item.name + '(+' + item.countryCode + ')'},
                                    value: country"></select><!--
                                --><input class="phone" type="text" data-bind="value: phone, attr: {readonly: !!user()}" placeholder="{{_('电话')}}"><!--
                                --><input class="email" type="text" data-bind="value: email, attr: {readonly: !!user()}" placeholder="{{_('邮箱')}}"/>
                            </div>
                            <div class="row" data-bind="visible: !user()">
                                <p class="title"></p>
                                <div id="captcha_div" class="captchaCode"></div><!--
                                --><button class="registerUser button red ajaxButton" data-bind="click: registerUser, disable: registerUserDisabled">{{_('获取短信验证码')}}</button>
                            </div>
                            <div class="row" data-bind="visible: !phoneVerified() && user()">
                                <p class="title"></p>
                                <input type="text" class="smsCode" data-bind="value: smsCode" placeholder="{{_('短信验证码')}}"/><!--
                                --><button class="getSmsCode button red ajaxButton" data-bind="click: getSmsCode, text: getSmsCodeText, disable: getSmsCodeDisabled"></button>
                            </div>
                        </div>
                        <div class="requirementRentFormError" data-bind="html: errorMsg, visible: errorMsg"></div>
                    </form>
                    <div class="actionWrap">
                        <p class="terms" data-bind="visible: step() === 2">{{_('提交后您将成为洋房东会员')}}<a href="/terms">{{_('查阅Terms of Service')}}</a></p>
                        <div data-bind="visible: step() === 1">
                            <button class="actionButton ghostButton red" data-bind="click: goNext">{{_('下一步')}}</button>
                        </div>
                        <div data-bind="visible: step() === 2">
                            <button class="actionButton ghostButton red" data-bind="click: goPrev">{{_('上一步')}}</button>
                            <button class="actionButton button red ajaxButton" data-bind="click: submit, disable: !user() ? true : submitDisabled()">{{_('提交')}}</button>
                        </div>
                    </div>
                </div>
                <div class="successWrap" data-bind="visible: successWrapVisible">
                    <h2 data-show="normal" style="">{{_('提交成功')}}</h2>
                    <p data-show="delegateRent" data-hide="requestContact" style="">{{_('提交成功，我们会在24小时内与您联系')}}</p>
                    <!--<p class="hint">您的求租意向单已经提交成功，您可以：</p>
                    <p class="item" data-show="delegateRent" data-hide="requestContact">{{_('负责该房源的租房顾问会在24小时内与您取得联系')}}</p>
                    <p class="item" data-show="requestContact" data-hide="delegateRent">{{_('已获取到当前房东的联系方式')}}</p>
                    <p class="item">{{_('让满足您求租需求的房源第一时间主动找到你，找房再也不用临时抱佛脚')}}</p>
                    <p class="item">{{_('在个人中心在中查看自己的')}}<a href="/user-intentions#rent">{{_('求租意向单')}}</a> {{_('，便捷地查看已联系过房东的联系方式，当您已经租到房子时可以修改求租单状态，平台将停止向您推荐')}}</p>
                    <p class="item">{{_('还想订阅其他合适的出租房源？')}}<a href="javascript:window.openRequirementRentForm()">{{_('提交新的求租意向单 ')}}</a></p>-->
                </div>
            </div>
            <button name="cancel" class="cancel" data-bind="click: close"><i class="icon-delete"></i></button>
        </div>
    </div>
</template>

