<!--@@master = master.html-->
<!--@@block = head-->
<!--build:css(dist) /static/styles/user_master.html.css-->
<link rel="stylesheet" href="/static/styles/userPage.css"/>
<link rel="stylesheet" href="/static/styles/project/userProfile.css"/>
<!--endbuild-->
<!--@@placeholder=head -->
<!--@@close-->

<!--@@block = custom_header-->
<div class="userPageHeader_phone  rmm">
    <div class="rmm-toggled rmm-closed rmm-center-closed">
        <div class="rmm-toggled-controls">
            <div class="rmm-button rmm-button-back">
                <img src="/static/images/common/header/phone/back.png"/>
            </div>
            <div id="rmm-center-wrapper" class="rmm-center">
                <label id="userPageHeader_title" class="title" for="">
                </label>
                <img class="rmm-center-indicator" alt="" src="/static/images/common/header/phone/indicator.png"/>
            </div>
        </div>

        <ul class="rmm-center-menu" style="display:none;">
            <li><a href="/user_settings">{{_('账户管理')}}</a></li>
            <li><a href="/user_favorites">{{_('我的收藏')}}</a></li>
            <li><a href="/user_intentions">{{_('投资意向单')}}</a></li>
            <li><a href="/user_properties">{{_('我的房产')}}</a></li>
            <li><a href="/user_messages">{{_('消息')}}</a></li>
        </ul>
    </div>
</div>

<!--@@close-->

<!--@@block = main-->
<div class="userPage">
    <div class="aside userProfile">
        <div class="account">
            <h1>{{user.get('nickname')}}</h1>

            %if user.get('phone_verified'):
            <a class="verificationStatus" href="/user_change_phone_1">
                <i><img src="/static/images/user/user-phone.png" style="margin-top:2px;"/></i>
                {{_('手机已验证')}}
            </a>
            %else:
            <a class="verificationStatus red" href="/user_verify_phone_1">
                <i><img src="/static/images/user/user-phone.png" style="margin-top:2px;"/></i>
                {{_('手机未验证')}}
                %end
            </a>

            %if user.get('email') and user.get('email_verified'):
            <a class="verificationStatus" href="/user_change_email">
                <i><img src="/static/images/user/user-email.png" style="margin-top: 3px;"/></i>
                {{_('邮箱已验证')}}
            </a>
            %elif user.get('email') and (not user.get('email_verified')):
            <a class="verificationStatus red" href="/user_verify_email">
                <i><img src="/static/images/user/user-email.png" style="margin-top: 3px;"/></i>
                {{_('邮箱未验证')}}
            </a>
            %else:
            <a class="verificationStatus red" href="/user_change_email">
                <i><img src="/static/images/user/user-email.png" style="margin-top: 3px;"/></i>
                {{_('邮箱未设置')}}
            </a>
            %end
        </div>
        <div class="settings">
            <ul>
                <li>
                    <a href="/user_settings">
                        <img id="icon-user_settings" src="/static/images/user/gear.png" />
                        <img id="icon-user_settings-active" style="display:none" src="/static/images/user/gear-active.png" />
                    </a>
                    {{_('账户管理')}}
                </li>
                <li>
                    <a href="/user_favorites">
                        <img id="icon-user_favorites" src="/static/images/user/star.png" />
                        <img id="icon-user_favorites-active" style="display:none" src="/static/images/user/star-active.png" />
                    </a>
                    {{_('我的收藏')}}
                </li>
                <li>
                    <a href="/user_intentions">
                        <img id="icon-user_intentions" src="/static/images/user/sheet.png"/>
                        <img id="icon-user_intentions-active" style="display:none" src="/static/images/user/sheet-active.png"/>
                    </a>
                    {{_('投资意向单')}}
                </li>
                <li>
                    <a href="/user_properties">
                        <img id="icon-user_properties" src="/static/images/user/house.png" />
                        <img id="icon-user_properties-active" style="display:none" src="/static/images/user/house-active.png" />
                    </a>
                    {{_('我的房产')}}
                </li>
                <li>
                    <a href="/user_messages">
                        <img id="icon-user_messages" src="/static/images/user/email.png" />
                        <img id="icon-user_messages-active" style="display:none" src="/static/images/user/email-active.png" />
                    </a>
                    {{_('消息')}}
                </li>
            </ul>
        </div>

        <div id="cvView" class="cv" style="display:none">
            <div class="header">
                <h2>{{_('个人资料')}}</h2>
                <button name=edit type="button" class="ghostButton red">{{_('编辑')}}</button>
            </div>
            <hr/>
            <table>
                <colgroup>
                    <col class="head">
                    <col class="value">
                </colgroup>
                <tbody>
                    <tr>
                        <td>{{_('姓名')}}</td>
                        <td>{{user.get('nickname')}}</td>
                    </tr>
                    <tr>
                        <td>{{_('性别')}}</td>
                        <td>
                            %if (user.get('gender') == 'male'):
                            {{_('男')}}
                            %elif (user.get('gender') == 'female'):
                            {{_('女')}}
                            %end
                        </td>
                    </tr>
                    <tr>
                        <td>{{_('国家')}}</td>
                        <td>
                            %if user.get('country'):
                            {{_i18n(user).get('country').get('value')}}
                            %end
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <form id="cvEdit" class="cv" style="display: none;">
            <div class="header">
                <h2>{{_('个人资料')}}</h2>
                <button name="cancel" type="button" class="ghostButton red">{{_('取消')}}</button>
                <button type="submit" class="ghostButton red">{{_('提交')}}</button>
            </div>
            <hr/>
            <div class="error" style="display: none;">

            </div>
            <div class="success" style="display: none;">

            </div>
            <table>
                <colgroup>
                    <col class="head">
                    <col class="value">
                </colgroup>
                <tbody>
                    <tr>
                        <td>{{_('姓名')}}</td>
                        <td>
                            <input name="nickname" type="text" value={{user.get('nickname')}} data-validator="required,trim"
                                   data-msg-required="{{_('请填写姓名')}}"/></td>
                    </tr>
                    <tr>
                        <td>{{_('性别')}}</td>
                        <td><label><input name="gender" type="radio" value="male"
                                          %if user.get('gender') == 'male':
                                          checked
                                          %end
                                          /> {{_('男')}}</label>
                            <label><input name="gender" type="radio" value="female"
                                          %if user.get('gender') == 'female':
                                          checked
                                          %end
                                          /> {{_('女')}}</label></td>
                    </tr>
                    <tr>
                        <td>{{_('国家')}}</td>
                        <td>
                            %if country_list:
                            <select name="country" class="country ghostSelect" style="color:#4d4d4d;">
                                %if not user.get('country'):
                                <option value="">
                                    {{_('请选择')}}
                                </option>
                                %end
                                %for index, country in enumerate(country_list):
                                <option value="{{country.get('id')}}"
                                        %if user.get('country') and user.get('country').get('id') == country.get('id'):
                                        selected
                                        %end
                                        >
                                    {{_i18n(country.get('value'))}}
                                </option>
                                %end
                            </select>
                            %end

                        </td>
                    </tr>
                </tbody>
            </table>
        </form>
    </div>
    <div class="main">
        <!--@@placeholder = main-->
    </div>
</div>
<div class="main_phone">
    <!--@@placeholder = main_phone-->
</div>
<script>
    (function () {
        var urlPath = location.pathname.split('/')[1]
        document.getElementById('icon-' + urlPath).style.display = 'none'
        document.getElementById('icon-' + urlPath + '-active').style.display = 'inline'

        var userPageHeaderTitle = document.getElementById('userPageHeader_title')
        if (urlPath === 'user_settings') {
            userPageHeaderTitle.innerHTML = "{{_('账户管理')}}"
        }
        else if (urlPath === 'user_favorites') {
            userPageHeaderTitle.innerHTML = "{{_('我的收藏')}}"
        }
        else if (urlPath === 'user_intentions') {
            userPageHeaderTitle.innerHTML = "{{_('投资意向单')}}"
        }
        else if (urlPath === 'user_properties') {
            userPageHeaderTitle.innerHTML = "{{_('我的房产')}}"
        }
        else if (urlPath === 'user_messages') {
            userPageHeaderTitle.innerHTML = "{{_('消息')}}"
        }

    })()

</script>
<!--@@close-->
<!--@@block = scripts-->

<!--build:js /static/scripts/user_master.html.js-->
<script src="/static/scripts/resize_main.js"></script>
<script src="/static/scripts/user_edit.js"></script>
<!--endbuild-->

<!--@@placeholder=scripts-->
<!--@@close-->
