<!--@@master = master.html-->
<!--@@block = head-->
<link rel="stylesheet" href="/static/styles/userPage.css"/>
<link rel="stylesheet" href="/static/styles/project/userProfile.css"/>
<!--@@placeholder=head -->
<!--@@close-->
<!--@@block = main-->
<div class="userPage">
    <div class="aside userProfile">
        <div class="account">
            <h1>{{user.get('nickname')}}</h1>
            <span class="verificationStatus red">
                <i><img src="/static/images/icon/user-phone.png" style="margin-top:2px;"/></i>
                %if user.get('phone_verified'):
                {{_('手机已验证')}}
                %else:
                {{_('手机未验证')}}
                %end
            </span>

            <span class="verificationStatus">
                <i><img src="/static/images/icon/user-email.png"/></i>
                %if user.get('email_verified'):
                {{_('邮箱已验证')}}
                %else:
                {{_('邮箱未验证')}}
                %end
            </span>
        </div>
        <div class="settings">
            <ul>
                <li>
                    <a href="/user_settings"><img id="icon-user_settings" src="/static/images/icon/user/gear.png"/></a>
                    {{_('账户管理')}}
                </li>
                <li>
                    <a href="/user_favorites"><img id="icon-user_favorites" src="/static/images/icon/user/star.png"/></a>
                    {{_('我的收藏')}}
                </li>
                <li>
                    <a href="/user_intentions"><img id="icon-user_intentions" src="/static/images/icon/user/sheet.png"/></a>
                    {{_('投资意向单')}}
                </li>
                <li>
                    <a href="/user_properties"><img id="icon-user_properties" src="/static/images/icon/user/house.png"/></a>
                    {{_('我的房产')}}
                </li>
                <li>
                    <a href="/user_messages"><img id="icon-user_messages" src="/static/images/icon/user/email.png"/></a>
                    {{_('消息')}}
                </li>
            </ul>
        </div>
        <script>

            (function () {
            var urlPath = location.pathname.split('/')[1]
            var icon = document.getElementById('icon-' + urlPath)
            if (icon) {
                var iconImagePath = icon.getAttribute('src')
                var iconImageName = iconImagePath.substring(0, iconImagePath.lastIndexOf('.'))
                var iconImageExtention = iconImagePath.substring(iconImagePath.lastIndexOf('.'))
                var newIconImagePath = iconImageName  + '-active' + iconImageExtention
                icon.setAttribute('src', newIconImagePath)
            }

            })()


        </script>

        <div id="cvView" class="cv" style="display:none">
            <div class="header">
                <h2>{{_('个人资料')}}</h2>
                <button name=edit type="button" class="ghostButton red">{{_('编辑')}}</button>
            </div>
            <hr/>
            <table>
                <colgroup>
                    <col class="head">
                    <col class="value">
                </colgroup>
                <tbody>
                    <tr>
                        <td>{{_('姓名')}}</td>
                        <td>{{user.get('nickname')}}</td>
                    </tr>
                    <tr>
                        <td>{{_('性别')}}</td>
                        <td>
                            %if (user.get('gender') == 'male'):
                            {{_('男')}}
                            %elif (user.get('gender') == 'female'):
                            {{_('女')}}
                            %end
                        </td>
                    </tr>
                    <tr>
                        <td>{{_('国家')}}</td>
                        <td>
                            %if user.get('country'):
                            {{_i18n(user).get('country').get('value')}}
                            %end
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <form id="cvEdit" class="cv" style="display: none;">
            <div class="header">
                <h2>{{_('个人资料')}}</h2>
                <button name="cancel" type="button" class="ghostButton red">{{_('取消')}}</button>
                <button type="submit" class="ghostButton red">{{_('提交')}}</button>
            </div>
            <hr/>
            <div class="error" style="display: none;">

            </div>
            <div class="success" style="display: none;">

            </div>
            <table>
                <colgroup>
                    <col class="head">
                    <col class="value">
                </colgroup>
                <tbody>
                    <tr>
                        <td>{{_('姓名')}}</td>
                        <td><input name="nickname" type="text" value={{user.get('nickname')}}  data-validator="required,trim"
                            data-msg-required="{{_('请填写姓名')}}"/></td>
                    </tr>
                    <tr>
                        <td>{{_('性别')}}</td>
                        <td><label><input name="gender" type="radio" value="male" checked/> {{_('男')}}</label>
                            <label><input name="gender" type="radio" value="female"/> {{_('女')}}</label></td>
                    </tr>
                    <tr>
                        <td>{{_('国家')}}</td>
                        <td>
                            %if country_list:
                            <select name="country" class="country ghostSelect" style="color:#4d4d4d;">
                                %for index, country  in enumerate(country_list):
                                <option value="{{country.get('id')}}">
                                    {{_i18n(country.get('value'))}}
                                </option>
                                %end
                            </select>
                            %end

                        </td>
                    </tr>
                </tbody>
            </table>
        </form>
    </div>
    <div class="main">
        <!--@@placeholder = main-->
    </div>
</div>
<!--@@close-->
<!--@@block = scripts-->
<script src="/static/scripts/resize_main.js"></script>
<script src="/static/scripts/user_edit.js"></script>
<!--@@placeholder=scripts-->
<!--@@close-->
