<!doctype html>
<html>
    <head>
        <!-- @@include = ../partials/meta.html -->

        <!-- @@include =../partials/css_import.html -->

        <!--build:css(dist) /static/styles/project/master.html.css-->
        <link rel="stylesheet" href="/static/styles/project/layout.css"/>
        <link rel="stylesheet" href="/static/styles/project/siteHeader.css"/>
        <link rel="stylesheet" href="/static/styles/project/siteFooter.css"/>
        <link rel="stylesheet" href="/static/styles/project/modal.css"/>
        <link rel="stylesheet" href="/static/styles/project/signinForm.css"/>
        <link rel="stylesheet" href="/static/styles/floatWindow.css"/>
        <!--endbuild-->

        <!-- @@placeholder = head -->

        <!--[if lte IE 8]>
        <script src="/static/vendors/html5shiv.min.js"></script>
        <![endif]-->
        <link rel="icon" href="/static/images/icon/favicon.ico" type="image/x-icon" />
        <link rel="shortcut icon" href="/static/images/icon/favicon.ico" type="image/x-icon" />
        <title>{{_('洋房东')}}</title>

    </head>
    <body>
        <!-- @@include =../partials/data_manager.html -->
        <div class="page">

            <div id="header" class="siteHeader_wrapper">
                <header class="siteHeader">
                    <a href="/"><img class="logo" src="/static/images/logo-{{_.lang}}.png" alt=""/></a>
                    <ul class="navbar">
                        <li class="selected"><a href="">{{_('我的海投')}}</a></li>
                        <li><a href="/house_list">{{_('海外房产')}}</a></li>
                        <li><a href="">{{_('项目开发')}}</a></li>
                        <li><a href="">{{_('业务模式')}}</a></li>
                    </ul>
                    <div class="user">
                        %if user:
                        <div id="userInfo" class="userInfo">
                            <p class="welcome">{{_('欢迎')}}</p>
                            <h2 class="userName">{{user["nickname"]}}</h2>
                            <button id="logout" class="logout ghostButton">{{_('登出')}}</button>
                        </div>
                        %else:
                        <div id="userLogin" class="userLogin">
                            <button id="login" class="login ghostButton red">{{_('登陆')}}</button>
                            <button id="register" class="register textButton" onclick="project.goToSignUp()">{{_('注册')}}
                            </button>
                        </div>
                        %end
                    </div>
                </header>
            </div>
            <main id="main">
                <!-- @@placeholder = main -->
            </main>

            <div id="footer" class="siteFooter_wrapper">
                <footer class="siteFooter">
                    <div class="contact">
                        <a href="/"><img class="logo" src="/static/images/logo-footer.png" alt=""/></a>
                        <p class="address">Optics Valley Road, Wuhan,
                            Hubei, China,
                        </p>
                        <p class="postalCode">430000</p>
                        <p class="phoneAndEmail">
                            4000926433 |
                            <a href="mailto:service@bbtechgroup.com?subject=Feedback">service@bbtechgroup.com</a>
                        </p>
                    </div>
                    <div class="social">
                        <h3>{{_('社交')}}</h3>
                        <img class="weibo" src="/static/images/media/weibo.png" alt=""/>
                        <img class="twitter" src="/static/images/media/twitter.png" alt=""/>
                        <img class="facebook" src="/static/images/media/facebook.png" alt=""/>
                        <img class="weixin" src="/static/images/media/wechat.png" alt=""/>
                    </div>
                    <div class="support">
                        <h3>{{_('服务支持')}}</h3>
                        <a href="/terms">{{_('服务条款')}}</a>
                        <a href="/privacy">{{_('隐私声明')}}</a>
                        <a href="/process">{{_('业务流程')}}</a>
                    </div>
                    <div class="feature">
                        <h3>{{_('功能')}}</h3>
                        <a href="">{{_('伦敦房产')}}</a>
                        <a href="">{{_('期房')}}</a>
                        <a href="">{{_('房产开发')}}</a>
                    </div>
                    <div class="language">
                        <h3>{{_('切换语言')}}</h3>
                        <select name="language" class="ghostSelect" style="min-width: 140px;">
                            <option value="zh_Hans_CN" selected>{{_('中文简体（中国）')}}</option>
                            <!-- <option value="zh_Hant_HK" selected>{{_('中文繁体（香港）')}}</option>-->
                            <option value="en_GB">{{_('English (United Kingdom)')}}</option>
                        </select>
                        <Span id="current_Language" style="display:none">{{_.lang}}</span>
                    </div>
                </footer>
            </div>
            <div id="copyright" class="copyright">
                <p>&copy;<script>document.write(new Date().getFullYear())</script>
                    {{_('洋房东')}}
                </p>
            </div>
        </div>
        <div id="modal_shadow" class="modal_shadow" style="display: none"></div>
        <div id="modal" class="modal" style="display: none">
            <a href="/"><img class="logo" src="/static/images/logo-login-{{_.lang}}.png" alt=""/></a>
            <!-- @@include =../partials/signin_form.html -->
        </div>

        <!-- @@include =../partials/float_window.html -->

        <!-- @@include =../partials/js_import.html -->
        <script>
            $(window).on('resize', function () {
                $('#main').css({minHeight: $(window).height() - $('#copyright').height() - $('#footer').height() - $('#header').height()})
            })
            $(function () {
                $('#main').css({minHeight: $(window).height() - $('#copyright').height() - $('#footer').height() - $('#header').height()})

                //setup language select
                var language = $('#current_Language').text()
                $('select[name=language]').find('option[value='+language+']').prop('selected',true)
            })
        </script>

        <script>
            $("#login").click(function () {
                $("#modal_shadow").show()
                $("#modal").show()
            });
            $("#modal_shadow").click(function () {
                $("#modal_shadow").hide()
                $("#modal").hide()
            });

            var errorArea = $('form[name=signin]').find('.errorMessage')
            $('form[name=signin]').submit(function (e) {
                e.preventDefault()
                errorArea.hide()
                var valid = $.validate(this, {onError: function (dom,validator,index) {
                    alert( dom.name +" validate error " + validator)
                    errorArea.text(dom.name + " validate error " + validator)
                    errorArea.show()
                }})
                if(!valid){return}

                var params = $(this).serializeObject()
                params.password = Base64.encode(params.password)
                $.post("/api/1/user/login",
                    params,
                    function (data, status) {
                        if (data.ret != 0) {
                            errorArea.text(data.msg)
                            errorArea.show()
                        }
                        else {
                            location.reload()
                            $("#modal_shadow").hide()
                            $("#modal").hide()
                        }
                    });
            })

            $("#logout").click(function () {
                $.get("/logout",
                    null,
                    function (data, status) {
                        location.reload()
                    }
                )
            });

            $('select[name=language]').change(function(){
                var language=$(this).children('option:selected').val();
                team.setLocationHrefParam("_i18n", language)
            })

        </script>
        <!--@@placeholder=scripts-->
    </body>
</html>
