<div ui-view>
    <div class="buttons">

        <span class="btn-group">
            <button class="btn" ng-click="$state.go('^')"><span class="fa fa-chevron-left"></span>{%$root.i18n('返回')%}
            </button>
        </span>
        <div class="btn-group pull-right">
            <select class="form-control" ng-options="p.value as p.name for p in i18nLanguages" ng-model="userLanguage.value"></select>
        </div>

    </div>

    <a ng-if="draftId" class="btn btn-danger" ui-sref='^.edit({id:draftId})' title="Edit">
        {%$root.i18n('此房产已存在草稿，点击跳转至草稿编辑')%}
    </a>
    <input type="button" ng-click="makeStatusToDraft()" class="btn btn-danger" ng-if="item.status === 'not reviewed'"
        value="{%$root.i18n('此房产处于待审核状态，请先将状态改为草稿再编辑此房产。')%}">

    <form class="form-horizontal login" method="post" autocomplete="on" ng-class="{submitted:submitted}"
        ng-submit="submit($event,editProperty)" name="editProperty" novalidate ng-controller="ctrlPropertyItems">
        <div>
            <tabset justified="true" style="margin: 16px 0;">
                <tab heading="{%$root.i18n('房产通用信息')%}">
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'name'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('名称')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" type-i18n="item.name" ng-model="item.name[userLanguage.value]"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'property_type'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('房产类型')%}</label>

                            <div class="controls">
                                <div select-enum name="property_type" ng-model="item.property_type" slug="propertyType"></div>

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'country'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('国家')%}</label>

                            <div class="controls">
                                <div select-enum name="country" ng-model="item.country"></div>

                            </div>
                        </div>
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'city'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('城市')%}</label>

                            <div class="controls">
                                <div select-city-by-country country="item.country" ng-model="item.city"></div>

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'street'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('街区')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" type-i18n="item.street" ng-model="item.street[userLanguage.value]"/>
                            </div>
                        </div>
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'zipcode'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('邮编')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" ng-model="item.zipcode"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-6" ui-draggable="true" drag="'address'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('地址详情')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" type-i18n="item.address"
                                    ng-model="item.address[userLanguage.value]"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-6" ui-draggable="true" drag="'real_address'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('真实地址')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" type-i18n="item.real_address"
                                    ng-model="item.real_address[userLanguage.value]"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-6" ui-draggable="true" drag="'highlight'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">

                            <div class="controls">
                                <div type-i18n="item.highlight"></div>
                                <table class="table table-bordered table-striped table-condensed "
                                    style="margin-bottom:30px">
                                    <colgroup>
                                        <col class="highlight">
                                        <col class="delete">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th>{%$root.i18n('亮点')%}</th>
                                            <th>{%$root.i18n('删除')%}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="point in item.highlight[userLanguage.value] track by $index">
                                            <td>
                                                <input type="text" ng-model="item.highlight[userLanguage.value][$index]"/>
                                            </td>
                                            <td>
                                                <span class="btn btn-danger" ng-click="onRemoveHighlight($index)" title="{%$root.i18n('移除')%}">
                                                    <i class="fa fa-trash-o"></i>
                                                </span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">
                                                <input type="button" ng-click="addHighlight()" class="btn btn-primary" value="{%$root.i18n('添加亮点')%}">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-12" ui-draggable="true" drag="'description'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('详情')%}</label>

                            <div class="controls">
                                <textarea ng-model="item.description[userLanguage.value]" class="form-control" type-i18n="item.description" rows="4"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'annual_cash_return_estimated'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('预计租金年化回报率')%}</label>
                            <div class="controls">
                                <input type="text" class="form-control" ng-model="item.annual_cash_return_estimated" placeholder="e.g. 10%"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'annual_return_estimated'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('预计总年化收益率')%}</label>
                            <div class="controls">
                                <input type="text" class="form-control" ng-model="item.annual_return_estimated" placeholder="e.g. 15%"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-12" ui-draggable="true" drag="'rental_guarantee'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('开发商包租')%}</label>
                            <div class="controls form-inline">
                                <input type="text" class="form-control" style="width: 40px" ng-model="item.rental_guarantee_rate"/>
                                <span>{%$root.i18n('%开发商保证最低收益率')%}</span>
                                <input type="text" class="form-control" style="width: 40px" ng-model="item.rental_guarantee_term"/>
                                <span>{%$root.i18n('年')%}</span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group   col-sm-12" ui-draggable="true" drag="'intention'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('投资标签')%}</label>
                            <div class="controls">
                                <div select-multiple-enums name="intention" ng-model="item.intention"></div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group   col-sm-12" ui-draggable="true" drag="'investment_type'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('投资类型')%}</label>
                            <div class="controls">
                                <div select-multiple-enums name="investment_type" ng-model="item.investment_type"></div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'equity_type'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('产权类型')%}</label>

                            <div class="controls">
                                <div select-enum name="equity_type" ng-model="item.equity_type"></div>
                            </div>
                        </div>
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'decorative_style'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('装修风格')%}</label>

                            <div class="controls">
                                <div select-enum name="decorative_style" ng-model="item.decorative_style"></div>

                            </div>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="form-group  col-sm-6" ui-draggable="true" drag="'latitude_longitude'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('地图位置')%}</label>

                            <div class="form-inline">
                                <input type="text" class="form-control  col-sm-3" ng-model="item.latitude"
                                    placeholder="Latitude"/>
                                <input type="text" class="form-control  col-sm-3" ng-model="item.longitude"
                                    placeholder="Longitude"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-12" ui-draggable="true" drag="'reality_images'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <div edit-i18n-gallery-box="item.reality_images" cover="item.cover" width-limit="1280" watermark="true" thumbnail-size="320,213" text="{%$root.i18n('实景图')%}{%$root.i18n('(最大宽度是1280px)')%}"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-12" ui-draggable="true" drag="'surroundings_images'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <div edit-i18n-gallery-box="item.surroundings_images" cover="item.cover" width-limit="1280" watermark="true" thumbnail-size="320,213" text="{%$root.i18n('生活配套设施图')%}{%$root.i18n('(最大宽度是1280px)')%}"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'property_price_type'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('房产价格类型')%}</label>

                            <div class="controls">
                                <div select-enum name="property_price_type" ng-model="item.property_price_type" slug="propertyPriceType"></div>

                            </div>
                        </div>
                    </div>
                    <div class="row" ng-if="propertyPriceType === 'similar_history_price'">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'equal_property_description'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('同等房产描述')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" type-i18n="item.equal_property_description"
                                    ng-model="item.equal_property_description[userLanguage.value]"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-6" ui-draggable="true" drag="'historical_price'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('历史成交价格')%}</label>

                            <div class="controls">
                                <table class="table table-bordered table-striped table-condensed "
                                    style="margin-bottom:30px">
                                    <colgroup>
                                        <col class="item">
                                        <col class="price">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th>{%$root.i18n('成交时间')%}</th>
                                            <th>{%$root.i18n('成交价格')%}</th>
                                            <th>{%$root.i18n('删除')%}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="price in item.historical_price">
                                            <td>
                                                <edit-date style="width: 185px;" ng-model="price.time"></edit-date>
                                            </td>
                                            <td>
                                                <div type-i18n-unit unit="price.price.unit||userCurrency.value" data="i18nCurrency" ng-model="price.price"
                                                    placeholder="{%$root.i18n('成交价格')%}"></div>
                                            </td>
                                            <td>
                                                <span class="btn btn-danger" ng-click="onRemoveHistoricalPrice($index)" title="{%$root.i18n('移除')%}">
                                                    <i class="fa fa-trash-o"></i>
                                                </span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                <input type="button" ng-click="addHistoricalPrice()" class="btn btn-primary" value="{%$root.i18n('添加历史成交价格')%}">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'estimated_income_description'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('月收支分析简要描述')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" type-i18n="item.estimated_income_description"
                                    ng-model="item.estimated_income_description[userLanguage.value]"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'estimated_monthly_rent'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('估计月租金收入')%}</label>

                            <div class="controls">
                                <div type-i18n-unit data="i18nCurrency" ng-model="item.estimated_monthly_rent"></div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-12" ui-draggable="true" drag="'estimated_monthly_cost'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('估计月平均支出')%}{%$root.i18n('(最多4项)')%}</label>

                            <div class="controls">
                                <table class="table table-bordered table-striped table-condensed"
                                    style="margin-bottom:30px">
                                    <colgroup>
                                        <col class="item">
                                        <col class="price">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th>{%$root.i18n('支出名称')%}</th>
                                            <th>{%$root.i18n('支出费用')%}</th>
                                            <th>{%$root.i18n('删除')%}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="cost in item.estimated_monthly_cost">
                                            <td>
                                                <input type="text" type-i18n="cost.item" ng-model="cost.item[userLanguage.value]"
                                                    placeholder="{%$root.i18n('支出名称')%}" class="form-control"/>
                                            </td>
                                            <td>
                                                <div type-i18n-unit unit="cost.price.unit||userCurrency.value" ng-model="cost.price" data="i18nCurrency" placeholder="{%$root.i18n('支出费用')%}"></div>
                                            </td>
                                            <td>
                                                <span class="btn btn-danger" ng-click="onRemoveCost($index)" title="{%$root.i18n('移除')%}">
                                                    <i class="fa fa-trash-o"></i>
                                                </span>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td colspan="3">
                                                <input type="button" ng-click="addCost()" class="btn btn-primary" value="{%$root.i18n('添加')%}">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-sm-12" ui-draggable="true" drag="'videos'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <div edit-videos="item.videos" text="视频"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-12" ui-draggable="true" drag="'brochure'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('推广资料')%}</label>

                            <div class="controls">
                                <div edit-brochure ng-model="item.brochure" property-id="item.id" text="{%$root.i18n('上传推广资料')%}"></div>
                            </div>
                        </div>
                    </div>
                </tab>
                <tab heading="{%$root.i18n('非楼盘特有信息')%}" ng-if="propertyType !== 'new_property'&&propertyType!=='student_housing'">
                    <div class="row">
                        <div class="form-group  col-sm-2" ui-draggable="true" drag="'total_price'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('总价格')%}</label>

                            <div class="controls">
                                <div type-i18n-unit data="i18nCurrency" ng-model="item.total_price" placeholder="{%$root.i18n('总价格')%}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-2" ui-draggable="true" drag="'bedroom_count'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('居室数')%}</label>

                            <div class="controls">
                                <input type="number" class="form-control" ng-model="item.bedroom_count"/>
                            </div>
                        </div>
                        <div class="form-group  col-sm-2" ui-draggable="true" drag="'living_room_count'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('客厅数')%}</label>

                            <div class="controls">
                                <input type="number" class="form-control" ng-model="item.living_room_count"/>
                            </div>
                        </div>
                        <div class="form-group  col-sm-2" ui-draggable="true" drag="'bathroom_count'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('卫生间数')%}</label>

                            <div class="controls">
                                <input type="number" class="form-control" ng-model="item.bathroom_count"/>
                            </div>
                        </div>
                        <div class="form-group  col-sm-2" ui-draggable="true" drag="'kitchen_count'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('厨房数')%}</label>

                            <div class="controls">
                                <input type="number" class="form-control" ng-model="item.kitchen_count"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'facing_direction'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('朝向')%}</label>

                            <div class="controls">
                                <div select-enum name="facing_direction" ng-model="item.facing_direction"></div>

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'space'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('面积')%}</label>

                            <div class="controls">
                                <div type-i18n-unit data="i18nArea" ng-model="item.space"></div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-12" ui-draggable="true" drag="'floor_plan'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <div edit-i18n-gallery-box="item.floor_plan" cover="item.cover" width-limit="1280" watermark="true" thumbnail-size="320,213" text="{%$root.i18n('户型图')%}{%$root.i18n('(最大宽度是1280px)')%}"></div>
                        </div>
                    </div>
                </tab>
                <tab heading="{%propertyType==='new_property'?$root.i18n('楼盘信息'):$root.i18n('学生公寓信息')%}" ng-if="propertyType === 'new_property'||propertyType==='student_housing'">
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'developer'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('开发商')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" type-i18n="item.developer"
                                    ng-model="item.developer[userLanguage.value]"/>
                            </div>
                        </div>
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'building_type'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('建筑类型')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" type-i18n="item.building_type"
                                    ng-model="item.building_type[userLanguage.value]"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group row  col-sm-6" ui-draggable="true" drag="'unit_price'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('单位面积参考价格')%}</label>

                            <div class="controls form-inline">
                                <div type-i18n-unit data="i18nArea" ng-model="item.unit_price.unit" placeholder="{%$root.i18n('单位面积，一般为1')%}"></div>
                                <div type-i18n-unit data="i18nCurrency" ng-model="item.unit_price.price" placeholder="{%$root.i18n('单位面积对应的售价')%}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-sm-4" ui-draggable="true" drag="'opening_time'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('开盘时间')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" type-i18n="item.opening_time"
                                    ng-model="item.opening_time[userLanguage.value]"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-sm-4" ui-draggable="true" drag="'completion_time'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('完工时间')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" type-i18n="item.completion_time"
                                    ng-model="item.completion_time[userLanguage.value]"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'building_area'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('建筑面积')%}</label>

                            <div class="controls">
                                <div type-i18n-unit data="i18nArea" ng-model="item.building_area"></div>
                            </div>
                        </div>
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'planning_area'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('规划面积')%}</label>

                            <div class="controls">
                                <div type-i18n-unit data="i18nArea" ng-model="item.planning_area"></div>
                            </div>
                        </div>
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'plot_ratio'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('容积率')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" ng-model="item.plot_ratio"/>
                            </div>
                        </div>
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'greening_rate'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('绿化率')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" ng-model="item.greening_rate"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'planning_household_count'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('规划户数')%}</label>

                            <div class="controls">
                                <input type="number" class="form-control" ng-model="item.planning_household_count"/>
                            </div>
                        </div>
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'parking_space_count'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('车位数')%}</label>

                            <div class="controls">
                                <input type="number" class="form-control" ng-model="item.parking_space_count"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'property_management_type'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('物业类型')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" type-i18n="item.property_management_type"
                                    ng-model="item.property_management_type[userLanguage.value]"/>
                            </div>
                        </div>
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'property_management_company'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('物业公司')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" type-i18n="item.property_management_company"
                                    ng-model="item.property_management_company[userLanguage.value]"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-12" ui-draggable="true" drag="'main_house_types'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('主要户型')%}</label>

                            <div class="controls">
                                <table class="table table-bordered table-striped table-condensed"
                                    style="margin-bottom:30px">
                                    <colgroup>
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th>{%$root.i18n('户型名')%}</th>
                                            <th>{%$root.i18n('户型结构')%}</th>
                                            <th>{%$root.i18n('面积与价格')%}</th>
                                            <th>{%$root.i18n('户型描述')%}</th>
                                            <th>{%$root.i18n('户型图')%}</th>
                                            <th>{%$root.i18n('删除')%}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="main_type in item.main_house_types">
                                            <td>
                                                <input type="text" type-i18n="main_type.name" ng-model="main_type.name[userLanguage.value]" placeholder="{%$root.i18n('户型名')%}"/>
                                            </td>
                                            <td>
                                                <table>
                                                    <tr>
                                                        <td>{%$root.i18n('居室数')%}</td>
                                                        <td>
                                                            <input type="number" ng-model="main_type.bedroom_count" placeholder="{%$root.i18n('居室数')%}" style="width:40px"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>{%$root.i18n('客厅数')%}</td>
                                                        <td>
                                                            <input type="number" ng-model="main_type.living_room_count" placeholder="{%$root.i18n('客厅数')%}" style="width:40px"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>{%$root.i18n('卫生间数')%}</td>
                                                        <td>
                                                            <input type="number" ng-model="main_type.bathroom_count" placeholder="{%$root.i18n('卫生间数')%}" style="width:40px"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>{%$root.i18n('厨房数')%}</td>
                                                        <td>
                                                            <input type="number" ng-model="main_type.kitchen_count" placeholder="{%$root.i18n('厨房数')%}" style="width:40px"/>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                            <td>
                                                <table>
                                                    <tr>
                                                        <td>{%$root.i18n('面积')%}</td>
                                                        <td>
                                                            <div type-i18n-unit unit="main_type.building_area.unit||userArea.value" data="i18nArea" ng-model="main_type.building_area" placeholder="{%$root.i18n('面积')%}"></div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>{%$root.i18n('户型总价')%}</td>
                                                        <td>
                                                            <div type-i18n-unit unit="main_type.total_price.unit||userCurrency.value" data="i18nCurrency" ng-model="main_type.total_price" placeholder="{%$root.i18n('户型总价')%}"></div>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                            <td>
                                                <input type="text" type-i18n="main_type.description" ng-model="main_type.description[userLanguage.value]" placeholder="{%$root.i18n('户型描述')%}"/>
                                            </td>
                                            <td>
                                                <div type-i18n="main_type.floor_plan"></div>
                                                <div edit-i18n-single-image="main_type.floor_plan" width-limit="1280" thumbnail-size="320,213" watermark="true"
                                                    text="{%$root.i18n('户型图')%}" style="width: 200px;"></div>
                                            </td>
                                            <td>
                                                <span class="btn btn-danger" ng-click="onRemoveHouse($index)" title="{%$root.i18n('移除')%}">
                                                    <i class="fa fa-trash-o"></i>
                                                </span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="9">
                                                <input type="button" ng-click="addHouse()" class="btn btn-primary" value="{%$root.i18n('添加户型')%}"/>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group  col-sm-12" ui-draggable="true" drag="'effect_pictures'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <div edit-i18n-gallery-box="item.effect_pictures" cover="item.cover" width-limit="1280" watermark="true" thumbnail-size="320,213" text="{%$root.i18n('效果图')%}{%$root.i18n('(最大宽度是1280px)')%}"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-12" ui-draggable="true" drag="'indoor_sample_room_picture'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <div edit-i18n-gallery-box="item.indoor_sample_room_picture" cover="item.cover" width-limit="1280" watermark="true" thumbnail-size="320,213" text="{%$root.i18n('室内样板间图')%}{%$root.i18n('(最大宽度是1280px)')%}"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-12" ui-draggable="true" drag="'planning_map'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <div edit-i18n-gallery-box="item.planning_map" cover="item.cover" width-limit="1280" watermark="true" thumbnail-size="320,213" text="{%$root.i18n('规划图')%}{%$root.i18n('(最大宽度是1280px)')%}"></div>
                        </div>
                    </div>
                </tab>
                <tab heading="{%$root.i18n('房产审核单')%}">
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'comment'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('审核备注')%}</label>

                            <div class="controls">
                                <input type="text" class="form-control" ng-model="item.comment"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-sm-3" ui-draggable="true" drag="'attachment'" drag-channel="delete,reset" title="{%$root.i18n('拖动删除')%}">
                            <label class="control-label">{%$root.i18n('审核附件')%}</label>

                            <div class="controls">
                                <div edit-files ng-model="item.attachment" text="{%$root.i18n('上传附件')%}"></div>
                            </div>
                        </div>
                    </div>
                </tab>
            </tabset>
        </div>
        <div>
            <input ng-if="!draftId" type="submit" class="btn btn-primary" value="{%$root.i18n('提交草稿')%}">
            <input ng-if="!draftId" type="button" class="btn btn-primary" value="{%$root.i18n('提交审核')%}" ng-click="submitForReview($event,editProperty)">
            <input ng-if="!draftId" type="button" class="btn btn-primary" ng-click="submitForPreview()" value="{%$root.i18n('保存并预览')%}">
        </div>
        <br>
        <span>{%$root.i18n('提交到:')%}</span>
        <select ng-options="p.value as p.name for p in propertyStatus" ng-model="item.status"
            class="input-sm">
        </select>
        <input ng-if="!draftId" type="submit" class="btn btn-primary" value="{%$root.i18n('提交')%}">
        <div ng-style="{'visibility':item.unset_fields?'visibility':'hidden'}">
            <div id="unset_fields_blank"></div>
            <div id="unset_fields" class="row" style="position:fixed;bottom:0;width:100%;z-index: 100">
                <div class="form-group col-sm-3" ui-on-Drop="onDelete($event,$data)" drop-channel="delete" style="display:block;background-color:#aaaaaa;margin:20px;padding:20px">

                    <div>{%$root.i18n('拖动至此删除内容')%}</div>
                    <table class="table table-bordered table-striped table-condensed ">
                        <tr ng-repeat="field in item.unset_fields">
                            <td>{%field|propertyKeyName%}</td>
                            <td>
                                <span class="btn btn-danger" ng-click="onRemoveDelete($index)" title="{%$root.i18n('移除')%}">
                                    <i class="fa fa-trash-o"></i>
                                </span></td>
                        </tr>
                    </table>
                </div>

                <div ng-if="targetItem" class="form-group col-sm-3" ui-on-Drop="onReset($event,$data)" drop-channel="reset" style="display:block;background-color:#aaaaaa;margin:20px;padding:20px">
                    <div>{%$root.i18n('拖动至此还原内容')%}</div>
                </div>
            </div>
        </div>
    </form>
</div>
