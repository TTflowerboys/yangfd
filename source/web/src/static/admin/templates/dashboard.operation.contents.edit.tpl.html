<div>
    <link rel="stylesheet" href="/static/vendors/loading_bar/loading-bar-small-icon.css"/>
    <div class="buttons">
        <span class="btn-group">
            <button class="btn" ng-click="$state.go('^')"><span class="fa fa-chevron-left"></span> {%$root.i18n('返回')%}</button>
        </span>
        <span class="btn-group">
            <select class="form-control" ng-options="p.value as p.name for p in i18nLanguages" ng-model="userLanguage.value"></select>
        </span>

    </div>
    <form name="partnerCreateForm" class="form-horizontal" ng-class="{submitted:submitted}"
        style="max-width: 800px; padding-bottom: 100px;" ng-submit="submit($event,partnerCreateForm)"
        novalidate>

        <div class="form-group">
            <div class="row col-sm-3">
                <label class="control-label">{%$root.i18n('频道名')%} *</label>
                <input class="form-control col-sm6" ng-model="item.channel" type="text" required/>
            </div>
        </div>

        <div class="form-group">
            <div class="row col-sm-3">
                <label class="control-label">{%$root.i18n('描述')%}</label>

                <div class="controls">
                    <input class="form-control col-sm6" type-i18n="item.description" ng-model="item.description[userLanguage.value]" type="text"/>
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="row col-sm-6">
                <label class="control-label">{%$root.i18n('链接')%}</label>
                <div class="controls">
                    <input class="form-control col-sm6" ng-model="item.link" type="text"/>
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="row col-sm-6">
                <label class="control-label">{%$root.i18n('图片')%}{%$root.i18n('(最大宽度是1920px)')%}</label>
                <div class="controls">
                    <edit-single-image ng-model="item.image" width-limit="1920" ratio="2" text="{%$root.i18n('添加图片')%}"></edit-single-image>
                </div>
            </div>
            <div class="row col-sm-12">
                <label class="control-label">{%$root.i18n('图片缺失时的内容')%}</label>
                <div class="controls">
                    <input class="form-control col-sm6" type-i18n="item.image_alt" ng-model="item.image_alt[userLanguage.value]"/>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="control-label">{%$root.i18n('文本内容')%}</label>

            <div class="controls">
                <table class="table table-bordered table-striped table-condensed "
                    style="margin-bottom:30px">
                    <colgroup>
                        <col class="language">
                        <col class="text">
                    </colgroup>
                    <thead>
                        <tr>
                            <th>{%$root.i18n('语言')%}</th>
                            <th>{%$root.i18n('内容')%}</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="(i, tempText) in item.text[userLanguage.value] track by $index">
                            <td><span class="uneditable-input">{%userLanguage.value%}</span></td>
                            <!--http://stackoverflow.com/questions/13714884/difficulty-with-ng-model-ng-repeat-and-inputs-->
                            <td><input type="text" ng-model="item.text[userLanguage.value][i]"/></td>
                            <td>
                                <span class="btn btn-danger" ng-click="removeTextItem($index)"
                                    title="{%$root.i18n('移除')%}">
                                    <i class="fa fa-trash-o"></i>
                                </span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="controls form-inline">
                <input class="form-control" type="text" ng-model="tempTextItem" placeholder="{%$root.i18n('文本条目内容')%}"/>
                <!--onAddLanguage(item.tempI18n) must be called before addI18nValue(),because addI18nValue makes item.tempI18n null-->
                <input type="button" ng-click="addTextItem()" class="btn btn-primary"
                    value="{%$root.i18n('添加')%}">
            </div>
        </div>

        <div class="form-actions" style="margin-bottom: 80px;">
            <input type="submit" class="btn btn-primary" value="{%$root.i18n('更新')%}">
            <input type="button" ng-click="$state.go('^')" class="btn" value="{%$root.i18n('取消')%}">
        </div>

        <div class="help-block">* {%$root.i18n('必填')%}</div>
    </form>
</div>
