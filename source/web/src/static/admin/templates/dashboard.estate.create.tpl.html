<div ui-view>
    <div class="buttons">

        <span class="btn-group">
            <button class="btn" ng-click="$state.go('^')"><span class="fa fa-chevron-left"></span>返回</button>
        </span>

    </div>
    <form class="form-horizontal login" method="post" autocomplete="on" ng-class="{submitted:submitted}"
        ng-submit="submit($event,createEstate)" name="createEstate" novalidate>
        <div class="row">
            <div class="form-group col-sm-3">
                <select class="form-control" ng-options="p.value as p.name for p in i18nLanguages"
                    ng-model="userLanguage.value"></select>
            </div>
            <div class="form-group col-sm-3">
                <select class="form-control" ng-options="item for item in i18nArea" ng-model="userArea">
                    <option value="">-- 面积单位 --</option>
                </select>
            </div>
            <div class="form-group col-sm-3">
                <select class="form-control" ng-options="item for item in i18nCurrency" ng-model="userCurrency">
                    <option value="">-- 货币单位 --</option>
                </select>
            </div>
        </div>
        <tabset justified="true" style="margin: 16px 0;">
            <tab heading="房产通用信息">
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">名称</label>

                        <div class="controls">
                            <input type="text" class="form-control" type-i18n="item.name" ng-model="item.name[userLanguage.value]"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">房产类型</label>

                        <div class="controls">
                            <select class="form-control" ng-model="item.property_type" style="width: 185px;"
                                ng-options="p.id as p.value for p in propertyTypeList">
                                <option value="">-- 选择 --</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">国家</label>

                        <div class="controls">
                            <input type="text" class="form-control" type-i18n="item.country"
                                ng-model="item.country[userLanguage.value]"/>
                        </div>
                    </div>
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">城市</label>

                        <div class="controls">
                            <input type="text" class="form-control" type-i18n="item.city" ng-model="item.city[userLanguage.value]"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">街区</label>

                        <div class="controls">
                            <input type="text" class="form-control" type-i18n="item.street" ng-model="item.street[userLanguage.value]"/>
                        </div>
                    </div>
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">邮编</label>

                        <div class="controls">
                            <input type="text" class="form-control" type-i18n="item.zipcode"
                                ng-model="item.zipcode[userLanguage.value]"/>
                        </div>
                    </div>
                </div>
                <hr/>
                <div class="row">
                    <div class="form-group col-xs-12 col-sm-6">
                        <label class="control-label">地址详情</label>

                        <div class="controls">
                            <input type="text" class="form-control" type-i18n="item.address"
                                ng-model="item.address[userLanguage.value]"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-12 col-sm-6">

                        <label class="control-label">亮点</label>
                        <div class="controls">
                            <div type-i18n="item.highlight"></div>
                            <div ng-repeat="point in item.highlight[userLanguage.value]" style="margin-bottom:30px"
                                class="col-sm-3 col-xs-6">
                                <span>{%point%}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <div class="input-group">
                            <input class="form-control" type="text" ng-model="item.tempPoint" placeholder="亮点"/>
                            <div class="input-group-btn">
                                <input type="button" ng-click="addHighlight()" class="btn btn-primary" value="添加"></div>
                        </div>
                        <div class="input-group">

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">年化回报预估</label>

                        <div class="controls">
                            <input type="text" class="form-control" ng-model="item.annual_return_estimated"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">投资标签</label>

                        <div class="controls">
                            <select class="form-control" ng-model="item.intention" style="width: 185px;"
                                ng-options="p.id as p.value for p in intentionList">
                                <option value="">-- 选择 --</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">产权类型</label>

                        <div class="controls">
                            <select class="form-control" ng-model="item.equity_type" style="width: 185px;"
                                ng-options="p.id as p.value for p in equityTypeList">
                                <option value="">-- 选择 --</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">装修风格</label>

                        <div class="controls">
                            <select class="form-control" ng-model="item.decorative_style" style="width: 185px;"
                                ng-options="p.id as p.value for p in decorativeStyleList">
                                <option value="">-- 选择 --</option>
                            </select>
                        </div>
                    </div>
                </div>
                <hr/>
                <div class="row">
                    <div class="form-group col-xs-12 col-sm-6">
                        <label class="control-label">地图位置</label>

                        <div class="form-inline">
                            <input type="text" class="form-control col-xs-6 col-sm-3" ng-model="item.latitude"
                                placeholder="Latitude"/>
                            <input type="text" class="form-control col-xs-6 col-sm-3" ng-model="item.longtitude"
                                placeholder="Longitude"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-12 col-sm-12">
                        <label class="control-label">实景图</label>

                        <div class="controls">
                            <div type-i18n="item.reality_images"></div>
                            <images-edit ng-model="item.reality_images[userLanguage.value]" width-limit="1920" ratio="2"
                                thumbnail-size="800,400" text="添加图片"></images-edit>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-12 col-sm-12">
                        <label class="control-label">生活配设施图</label>

                        <div class="controls">
                            <div type-i18n="item.surroundings_images"></div>
                            <images-edit ng-model="item.surroundings_images[userLanguage.value]" width-limit="1920" ratio="2"
                                thumbnail-size="800,400" text="添加图片"></images-edit>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">房产价格类型</label>
                        <div class="controls">
                            <select class="form-control" ng-model="item.property_price_type" style="width: 185px;"
                                ng-options="p.id as p.value for p in propertyPriceTypeList">
                                <option value="">-- 选择 --</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">同等房产描述</label>

                        <div class="controls">
                            <input type="text" class="form-control" type-i18n="item.equal_property_description"
                                ng-model="item.equal_property_description[userLanguage.value]"/>
                        </div>
                    </div>
                </div>
                <hr/>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">历史成交价格</label>

                        <div class="controls">
                            <table class="table table-bordered table-striped table-condensed "
                                style="margin-bottom:30px">
                                <colgroup>
                                    <col class="item">
                                    <col class="price">
                                </colgroup>
                                <thead>
                                    <tr>
                                        <th>成交时间</th>
                                        <th>成交价格</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="price in item.historical_price">
                                        <td>{%price.time * 1000 | date : medium%}</td>
                                        <td>{%price.price%}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>
                <div class="row">
                    <div class="controls col-xs-6 col-sm-3">
                        <span class="controls col-xs-8 col-sm-4">成交时间</span>

                        <date-edit style="width: 185px;" ng-model="item.tempHistoryTime"></date-edit>
                    </div>
                    <div class="controls col-xs-6 col-sm-3">

                        <input type="text" type-i18n-unit="item.tempHistoryPrice" unit="userCurrency" ng-model="item.tempHistoryPrice.value"
                            placeholder="成交价格"/>
                        <input type="button" ng-click="addHistoricalPrice()" class="btn btn-primary" value="添加">
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">估计月租金收入</label>

                        <div class="controls">
                            <input type="text" class="form-control"
                                type-i18n-unit="item.estimated_monthly_rent"
                                unit="userCurrency"
                                ng-model="item.estimated_monthly_rent.value"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">估计月平均支出</label>

                        <div class="controls">
                            <table class="table table-bordered table-striped table-condensed"
                                style="margin-bottom:30px">
                                <colgroup>
                                    <col class="item">
                                    <col class="price">
                                </colgroup>
                                <thead>
                                    <tr>
                                        <th>支出名称</th>
                                        <th>支出费用</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="cost in item.estimated_monthly_cost">
                                        <td>{%cost.item%}</td>
                                        <td>{%cost.price%}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="controls col-xs-12 col-sm-6">
                        <input type="text" type-i18n="item.tempCostItem" ng-model="item.tempCostItem[userLanguage.value]"
                            placeholder="支出名称"/>
                        <input type="text" type-i18n-unit="item.tempCostPrice" unit="userCurrency" ng-model="item.tempCostPrice.value"
                            placeholder="支出费用"/>
                        <input type="button" ng-click="addCost()" class="btn btn-primary" value="添加">
                    </div>
                </div>
            </tab>
            <tab heading="非楼盘特有信息" ng-if="item.property_type !== '54100a14c6e47b14331ad29f'">
                <div class="row">
                    <div class="form-group col-xs-4 col-sm-2">
                        <label class="control-label">总价格</label>

                        <div class="controls">
                            <input type="text" class="form-control" type-i18n-unit="item.total_price" unit="userCurrency" ng-model="item.total_price.value"/>
                        </div>
                    </div>
                    <div class="form-group col-xs-4 col-sm-2">
                        <label class="control-label">居室数</label>

                        <div class="controls">
                            <input type="text" class="form-control" ng-model="item.bedroom_count"/>
                        </div>
                    </div>
                    <div class="form-group col-xs-4 col-sm-2">
                        <label class="control-label">客厅数</label>

                        <div class="controls">
                            <input type="text" class="form-control" ng-model="item.living_room_count"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-4 col-sm-2">
                        <label class="control-label">卫生间数</label>

                        <div class="controls">
                            <input type="text" class="form-control" ng-model="item.bathroom_count"/>
                        </div>
                    </div>
                    <div class="form-group col-xs-4 col-sm-2">
                        <label class="control-label">厨房数</label>

                        <div class="controls">
                            <input type="text" class="form-control" ng-model="item.kitchen_count"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">朝向</label>

                        <div class="controls">
                            <select class="form-control" ng-model="item.facing_direction" style="width: 185px;"
                                ng-options="p.id as p.value for p in facingDirectionList">
                                <option value="">-- 选择 --</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">面积</label>

                        <div class="controls">
                            <input type="text" class="form-control" type-i18n-unit="item.space" unit="userArea" ng-model="item.space.value"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-12 col-sm-12">
                        <label class="control-label">户型图</label>

                        <div class="controls">
                            <div type-i18n="item.floor_plan"></div>
                            <images-edit text="添加图片" ng-model="item.floor_plan[userLanguage.value]" width-limit="1920"
                                ratio="2" thumbnail-size="800,400"></images-edit>
                        </div>
                    </div>
                </div>
            </tab>
            <tab heading="楼盘信息" ng-if="item.property_type === '54100a14c6e47b14331ad29f'">
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">单位面积参考价格</label>

                        <div class="controls">
                            <!--<input type="text" class="form-control" type-i18n-unit="item.unit_price" ng-model="item.unit_price[userArea]"/>-->
                            <input type="text" class="form-control" type-i18n-unit="item.unit_price.price" unit="userCurrency" ng-model="item.unit_price.price.value"/>
                            <input type="text" class="form-control" type-i18n-unit="item.unit_price.unit" unit="userArea" ng-model="item.unit_price.unit.value"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">主要户型</label>

                        <div class="controls">
                            <table class="table table-bordered table-striped table-condensed"
                                style="margin-bottom:30px">
                                <colgroup>
                                    <col class="name">
                                    <col class="bedroom_count">
                                    <col class="living_room_count">
                                    <col class="bathroom_count">
                                    <col class="kitchen_count">
                                    <col class="total_price">
                                    <col class="floor_plan">
                                </colgroup>
                                <thead>
                                    <tr>
                                        <th>户型名</th>
                                        <th>居室数</th>
                                        <th>客厅数</th>
                                        <th>卫生间数</th>
                                        <th>厨房数</th>
                                        <th>户型总价</th>
                                        <th>户型图</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="main_type in item.main_house_types">
                                        <td>{%main_type.name%}</td>
                                        <td>{%main_type.bedroom_count%}</td>
                                        <td>{%main_type.living_room_count%}</td>
                                        <td>{%main_type.bathroom_count%}</td>
                                        <td>{%main_type.kitchen_count%}</td>
                                        <td>{%main_type.total_price%}</td>
                                        <td>{%main_type.floor_plan%}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="controls">
                            <input type="text" type-i18n="item.tempHouseName" ng-model="item.tempHouseName[userLanguage.value]" placeholder="户型名"/>
                            <input type="text" ng-model="item.tempBedroomCount" placeholder="居室数"/>
                            <input type="text" ng-model="item.tempLivingRoomCount" placeholder="客厅数"/>
                            <input type="text" ng-model="item.tempBathroomCount" placeholder="卫生间数"/>
                            <input type="text" ng-model="item.tempKitchenCount" placeholder="厨房数"/>
                            <input type="text" type-i18n-unit="item.tempTotalPrice" unit="userCurrency" ng-model="item.tempTotalPrice.value" placeholder="户型总价"/>
                            <div type-i18n="item.tempFloorPlan"></div>
                            <single-image-edit ng-model="item.tempFloorPlan[userLanguage.value]" width-limit="1920" ratio="2"
                                thumbnail-size="800,400"
                                text="户型图"></single-image-edit>
                            <input type="button" ng-click="addHouse()" class="btn btn-primary" value="添加户型"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">开盘时间</label>

                        <div class="controls">
                            <date-edit ng-model="item.opening_time"></date-edit>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">建筑类型</label>

                        <div class="controls">
                            <input type="text" class="form-control" type-i18n="item.building_type"
                                ng-model="item.building_type[userLanguage.value]"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">物业类型</label>

                        <div class="controls">
                            <input type="text" class="form-control" type-i18n="item.property_management_type"
                                ng-model="item.property_management_type[userLanguage.value]"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">建筑面积</label>

                        <div class="controls">
                            <input type="text" class="form-control" type-i18n-unit="item.building_area" unit="userArea" ng-model="item.building_area.value"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">容积率</label>

                        <div class="controls">
                            <input type="text" class="form-control" ng-model="item.plot_ratio"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">规划面积</label>

                        <div class="controls">
                            <input type="text" class="form-control" type-i18n-unit="item.planning_area" unit="userArea" ng-model="item.planning_area.value"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">绿化率</label>

                        <div class="controls">
                            <input type="text" class="form-control" ng-model="item.greening_rate"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">车位数</label>

                        <div class="controls">
                            <input type="text" class="form-control" ng-model="item.parking_space_count"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">规划户数</label>

                        <div class="controls">
                            <input type="text" class="form-control" ng-model="item.planning_household_count"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">开发商</label>

                        <div class="controls">
                            <input type="text" class="form-control" ng-model="item.developer[userLanguage.value]"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">物业公司</label>

                        <div class="controls">
                            <input type="text" class="form-control"
                                ng-model="item.property_management_company[userLanguage.value]"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-12 col-sm-12">
                        <label class="control-label">效果图</label>

                        <div class="controls">
                            <div type-i18n="item.effect_pictures"></div>
                            <images-edit ng-model="item.effect_pictures[userLanguage.value]" width-limit="1920" ratio="2"
                                text="添加图片" thumbnail-size="800,400"></images-edit>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-12 col-sm-12">
                        <label class="control-label">室内样板间图</label>

                        <div class="controls">
                            <div type-i18n="item.indoor_sample_room_picture"></div>
                            <images-edit ng-model="item.indoor_sample_room_picture[userLanguage.value]" width-limit="1920" ratio="2"
                                text="添加图片" thumbnail-size="800,400"></images-edit>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-12 col-sm-12">
                        <label class="control-label">规划图</label>

                        <div class="controls">
                            <div type-i18n="item.planning_map"></div>
                            <images-edit ng-model="item.planning_map[userLanguage.value]" width-limit="1920" ratio="2"
                                text="添加图片" thumbnail-size="800,400"></images-edit>
                        </div>
                    </div>
                </div>
            </tab>
            <tab heading="房产审核单">
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">审核备注</label>

                        <div class="controls">
                            <input type="text" class="form-control" ng-model="item.comment"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6 col-sm-3">
                        <label class="control-label">审核附件</label>

                        <div class="controls">
                            <files-edit ng-model="item.attachment" text="上传附件"></files-edit>
                        </div>
                    </div>
                </div>
            </tab>
        </tabset>
        <input type="submit" class="btn btn-primary" value="提交">
    </form>
</div>
