<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Bill Booking Request</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <style type="text/css">
         img {
             outline: none;
             text-decoration: none;
             -ms-interpolation-mode: bicubic;
         }
         a img {
             border: none;
         }
        </style>
        <link rel="stylesheet" href="/static/styles/billBookingRequest.css" />
    </head>

    % from datetime import datetime
    <body style="">
        <img class="watermark" src="/static/images/bill/watermark.svg" alt="" style="">
        <div class="container">
            <div class="header">
                <img class="logo" src="/static/images/bill/logo.png" alt="" style="">
                <div class="title field">
                    <label for="" class="hint">
                        BOOKING REQUEST<br>
                        预订请求（{{"租客" if bill_role == "tenant" else "房东"}}）
                    </label>
                    <input class="value" name="" type="text" value="Property Manager ID: 012 Steven Yang"/>
                </div>
            </div>
            <div class="content">
                <div class="tenant">
                    <div class="name field">
                        <label for="" class="hint">
                            TENANT NAME<br>
                            租客姓名
                        </label>
                        <input class="value" name="" type="text" value="{{ticket.get('nickname')}}"/>
                    </div>
                    <div class="gender field">
                        <label for="" class="hint">
                            GENDER<br>
                            性别
                        </label>
                        <input class="value" name="" type="text" value="{{ticket.get('gender')}}"/>
                    </div>
                    <div class="age field">
                        <label for="" class="hint">
                            AGE<br>
                            年龄
                        </label>
                        %if ticket.get('date_of_birth'):
                            % now = datetime.utcnow()
                            <input class="value" name="" type="text" value="{{(now.year - ticket.get('date_of_birth').year)}}"/>
                        %end
                    </div>
                    <div class="count field">
                        <label for="" class="hint">
                            NUMBER OF TENANT<br>
                            入住人数
                        </label>
                        <input class="value" name="" type="text" value="{{ticket.get('tenant_count')}}"/>
                    </div>
                    %if ticket.get('occupation'):
                        <div class="occupation field">
                            <label for="" class="hint">
                                OCCUPATION<br>
                                职业
                            </label>
                            <input class="value" name="" type="text" value="{{ticket.get('occupation').get('value')}}"/>
                        </div>
                    %end
                </div>
                <div class="right">
                    <div class="property">
                        <div class="field checkIn">
                            <label for="" class="hint">
                                AGREED LEASE START DATE/<br>
                                CHECK IN DATE 入住日期
                            </label>
                            %if ticket.get('rent_available_time'):
                                <input class="value" name="" type="text" value="{{ticket.get('rent_available_time').strftime('%b %d, %Y')}}"/>
                            %end
                        </div>
                        <div class="field arrow">
                            <img src="/static/images/bill/arrow.png" alt="" class="arrow">
                        </div>
                        <div class="field checkout">
                            <label for="" class="hint">
                                AGREED LEASE END DATE/<br>
                                CHECK OUT DATE 迁出日期                            
                            </label>
                            %if ticket.get('rent_deadline_time'):
                                <input class="value" name="" type="text" value="{{ticket.get('rent_deadline_time').strftime('%b %d, %Y')}}"/>
                            %end
                        </div>
                        <div class="field address">
                            <label for="" class="hint">
                                PROPERTY DETAILS<br>
                                住宅详情                            
                            </label>
                            %if ticket.get('interested_rent_tickets'):
                                <textarea class="value address" cols="" id="" name="" rows="" >{{get_rent_property_address(ticket.get('interested_rent_tickets')[0])}}</textarea>
                            %end
                        </div>
                        <div class="field pet">
                            <label for="" class="hint">
                                IS TENANT BRING A PET?<br>
                                租客是否携带宠物入住？                         
                            </label>
                            <input class="value" name="" type="text" value="{{'YES' if ticket.get('pet') else 'NO'}}"/>
                        </div>
                        <div class="field smoke">
                            <label for="" class="hint">
                                IS TENANT SMOKING?<br>
                                租客是否吸烟？                   
                            </label>
                            <input class="value" name="" type="text" value="{{'YES' if ticket.get('smoke') else 'NO'}}"/>
                        </div>
                        <div class="field children">
                            <label for="" class="hint">
                                IS TENANT BRING CHILDREN?<br>
                                租客是否带儿童入住？ 
                            </label>
                            <input class="value" name="" type="text" value="{{'YES' if ticket.get('baby') else 'NO'}}"/>
                        </div>
                    </div>
                    <div class="fee">
                        <div class="field rent">
                            <label for="" class="hint">
                                WEEKLY RENT<br>
                                周租金
                            </label>
                            %if ticket.get('interested_rent_tickets'):
                                <input class="value" name="" type="text" value="{{ticket.get('interested_rent_tickets')[0].get('price').get('unit_symbol') + ticket.get('interested_rent_tickets')[0].get('price').get('value')}}/week"/>
                                <input class="tip" name="" type="text" value=" {{'(Bill Included)' if ticket.get('interested_rent_tickets')[0].get('bill_covered') else ''}}"/>
                            %end
                        </div>
                        %if ticket.get('interested_rent_tickets') and ticket.get('interested_rent_tickets')[0].get('deposit') is not None:
                            <div class="field deposit">
                                <label for="" class="hint">
                                    DESPOSIT<br>
                                    押金
                                </label>
                                <input class="value" name="" type="text" value="{{(ticket.get('interested_rent_tickets')[0].get('deposit').get('unit_symbol') + ticket.get('interested_rent_tickets')[0].get('desposit').get('value')) if ticket.get('interested_rent_tickets')[0].get('deposit') is not None else 'NO'}}<"/>
                              </div>
                        %end
                        <div class="field holding_desposit">
                            <label for="" class="hint">
                                HOLDING DEPOSIT<br>
                                订金
                            </label>
                            %if ticket.get('interested_rent_tickets'):
                                <input class="value" name="" type="text" value="{{ticket.get('interested_rent_tickets')[0].get('holding_deposit').get('unit_symbol') + ticket.get('interested_rent_tickets')[0].get('holding_deposit').get('value')}}"/>
                            %end
                        </div>
                        %if bill_role == "tenant":
                            <div class="field service_fee">
                                <label for="" class="hint">
                                    YANGFD SERVICE FEE<br>
                                    洋房东平台服务费
                                </label>
                                %if ticket.get('interested_rent_tickets'):
                                    <input class="value" name="" type="text" value="{{ticket.get('interested_rent_tickets')[0].get('price').get('unit_symbol') + str(ticket.get('interested_rent_tickets')[0].get('price').get('value_float') * 1.2)}}"/>
                                    <input class="tip" name="" type="text" value="{{ticket.get('interested_rent_tickets')[0].get('price').get('unit_symbol') + ticket.get('interested_rent_tickets')[0].get('price').get('value')}}(Discounted)+VAT20%"/>
                                %end
                            </div>
                        %end
                    </div>
                </div>
            </div>
            %if contact:
                <div class="contact">
                    <div class="field tenant">
                        <label for="" class="hint">
                            TENANT CONTACT INFORMATION<br>
                            租客联系方式
                        </label>
                        <input class="value" name="" type="text" value="{{ticket.get('phone')}}({{ticket.get('email')}})"/>
                    </div>
                    <div class="field landlord">
                        <label for="" class="hint">
                            LANDLORD CONTACT INFORMATION<br>
                            房东联系方式
                        </label>
                         %if ticket.get('interested_rent_tickets'):
                             <input class="value" name="" type="text" value="{{ticket.get('interested_rent_tickets')[0].get('user').get('phone')}}({{ticket.get('interested_rent_tickets')[0].get('user').get('email')}})"/>
                         %end
                    </div>
                </div>
            %end
            <div class="footer">
                <div class="copyright">
                    <p>Copy right Brothers Bridge Technology Ltd 2012-2016</p>
                </div>
                <div class="companyAddress">
                    <p>
                        Digital Enterprise Center 10 Floor,<br>
                        6 Mitre Passage O2, North Greenwich, London UK SE10 0ER<br>
                        +44(0)20 30402258<br>
                        <a class="website" href="http://www.yangfd.com">www.yangfd.com</a>
                    </p>
                </div>
            </div>
            
        </div>
    </body>
    <!-- jQuery-->
    <!--[if !IE]>-->
    <script src="/static/bower_components/jquery/dist/jquery.min.js"></script>
    <!--<![endif]-->
    <!--[if IE]>
    <script src="/static/bower_components/jquery-1.11.0/dist/jquery.min.js"></script>
    <![endif]-->
    <script src="/static/bower_components/jquery-migrate/jquery-migrate.min.js"></script>
    <!-- /jQuery-->


    <script>
     window.updateContentSize = function () {
         $('.content').outerHeight($('.watermark').height())
     }

    // $(window).resize(window.updateContentSize);
    // window.updateContentSize()


    </script>
</html>
