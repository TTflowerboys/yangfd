<!doctype html>
<html>
    <head>
        <!-- @@include = partials/meta.html -->

        <!-- @@include =partials/css_import.html -->

        <link rel="stylesheet" href="/static/styles/comingSoon.css"/>

        <!--[if lte IE 8]>
        <script src="/static/vendors/html5shiv.min.js"></script>
        <![endif]-->

    </head>
    <body>

        <div class="opening">
            <div class="opening_inner">
                <img class="logo" src="/static/images/logo-yfd.png" alt=""/>
                <h1 class="hint">{{_('LAUNCHING OCT 2014')}}</h1>
                <form name="subscription" class="subscription">
                    <input class="email" name="email" type="text" placeholder={{_('Email')}} data-validator="required, trim email"/>
                    <button type="submit" class="button red">{{_('Subscription')}}</button>
                    <p class="errorMessage"></p>
                </form>
                <h2 class="successMessage">{{_('Thanks for your subscription!')}} <br>{{_('We will notify you at first when website is lanuched!')}}</h2>
                <img class="wechat" src="/static/images/media/wechat.png" alt=""/>
            </div>
        </div>
        <div class="whatWeDo_wrapper">
            <div class="whatWeDo">
                <h2 class="title">{{_("What we do?")}}</h2>
                <p class="description">{{_("We focus on providing diversified oversea investment opportunities to our investors, get our investors on board with detailed investment analysis report and professional property consultant.")}}<br>
                    <br>
                    {{_("YoungFunding will launch first in China and UK, provide diversified oversea investment opportunities such as properties, houses, apartment, and recommend personalized investment opportunities based on your intent and budget, help you with detailed property introduction and investment analysis report, and let our professional property consultant help to take care everything when you want to settle your investment, really make real estate investment easy.")}}
                </p>
            </div>
        </div>
        <div class="requirement">
            <div class="requirement_title">
                <H2 class="title">{{_('Submit Your Investment Needs')}}</h2>
                <h3 class="subtitle">{{_('If you are interested in investing UK property, please submit your investment needs here, we will get in touch and help your with your needs')}}
                </h3>
            </div>
            <form class="requirement_form"  name="requirement">
                <div class="form_row">
                    <input class="name ghostInput" name="nickname" type="text" placeholder={{_('Name')}} data-validator="required, trim"/>
                </div>
                <div class="form_row">
                    <select name="country" class="coutry ghostSelect" style="color:#4d4d4d;">
                        <option value="CN">{{_('China +86')}}</option>
                        <option value="HK">{{_('HK +85')}}</option>
                        <option value="UK">{{_('UK +44')}}</option>
                        <option value="US">{{_('US +1')}}</option>
                    </select>
                    <span class=vr></span>
                    <input class="phone ghostInput" name="phone" type="text" placeholder={{_('Phone')}}  data-validator="required, trim number"/>
                </div>
                <div class="form_row">
                    <input class="email ghostInput" name="email" type="text" placeholder={{_('Email')}}  data-validator="required, trim email"/>
                </div>
                <div class="form_row">
                    <p class="budgetHint">{{_('Your Budget')}}</p>
                </div>
                <div class="form_row">
                    <select class="budget ghostSelect" name="budget" style="color:#4d4d4d;">
                        <option value="100">{{_('Below 1 Million')}}</option>
                        <option value="300">{{_('1 Million - 3 Million')}}</option>
                        <option value="500" selected="selected">{{_('3 Million - 5 Million')}}</option>
                        <option value="1000">{{_('5 Million - 10 Million')}}</option>
                        <option value="1001">{{_('Above 10 Million')}}</option>
                    </select>
                </div>
                <div class="form_row">
                    <textarea class="detail ghostTextArea" name="description" placeholder={{_('Write your requirement.')}}></textarea>
                </div>
                <div class="form_row">
                    <button type="submit" class="button red">{{_('Submit')}}</button>
                </div>
                <p class="errorMessage"></p>
            </form>
            <h2 class="successMessage">{{_('Your requirement has been submited, our employee will contact in the future.')}}</h2>
        </div>

        <div id="copyright" class="copyright">
            <p>&copy;<script>document.write(new Date().getFullYear())</script>
                Brothers Bridge Group
            </p>
        </div>

        <!-- @@include =partials/js_import.html -->
        <script>
            $(window).on('resize', function () {
                $('#main').css({minHeight: $(window).height() - $('#copyright').height()})
            })
            $(function () {
                $('#main').css({minHeight: $(window).height() - $('#copyright').height()})
            })
        </script>

        <div id="data_localization" style="display:none">
          <span id="notEmpty">{{' should not be empty'}}</span>
          <span id="badNumber">{{' bad format'}}</span>
          <span id="badEmail">{{' invalid format'}}</span>
          <span id="Email">{{'Email'}}</span>
          <span id="subscriptionFailure">{{'Subscription Failure'}}</span>
          <span id="submitRequirementFailure">{{_('Submit Requirement Failure')}}</span>
        </div>
        
        <script>
          var localization = $('#data_localization')
          
            function errorMessageFormValidatorType(validator) {
                if (validator == "required") {
                    return localization.find('#notEmpty').text()
                }
                else if (validator == "number")
                {
                    return localization.find('#badNumber').text()
                }
                else if (validator == "email")
                {
                    return localization.find('#badEmail').text()
                }
            }

            $('form[name=subscription]').submit(function (e) {
                e.preventDefault()
                var errorArea =  $(this).find(".errorMessage")
                errorArea.hide()
                var successArea = $('.opening .successMessage')

                var valid = $.validate(this, {onError: function (dom,validator,index) {
                    errorArea.text(localization.find('#Email').text() + errorMessageFormValidatorType(validator))
                    errorArea.show()
                }})
                if(!valid){return}
                var params = $(this).serializeObject()
                $.post("/api/1/subscription/add",
                        params,
                        function (data, status) {
                            if (data.ret != 0) {
                                errorArea.text(localization.find('#subscriptionFailure').text())
                                errorArea.show()
                            }
                            else {
                              successArea.show()
                                $('form[name=subscription]').hide()
                            }
                        });
            })

            $('form[name=requirement]').submit(function (e) {
                e.preventDefault()
                var errorArea= $(this).find(".errorMessage")
                errorArea.hide()
                var successArea = $('.requirement .successMessage')
               $('form[name=requirement] input, form[name=requirement] textarea').each(
                 function(index){  
                   $(this).css('border', '2px solid #ccc')
                 }
               )
                 
                var valid = $.validate(this, {onError: function (dom,validator,index) {
                    errorArea.text(dom.placeholder + errorMessageFormValidatorType(validator))
                    errorArea.show()
                    $(dom).css('border', '2px solid red')
                }})
                if(!valid){return}
                var params = $(this).serializeObject()
                //TODO: 需要更新 budget 的类型
                $.post("/api/1/intention_ticket/add",
                        params,
                        function (data, status) {
                            if (data.ret != 0) {
                                errorArea.text(localization.find('#submitRequirementFailure').text())
                                errorArea.show()
                            }
                            else {
                                successArea.show()
                                $('.requirement_title').hide()
                                $('.requirement_form').hide()
                            }
                        });
            })

        </script>

    </body>
</html>

